%!PS-Adobe-3.0
%%BoundingBox: 18 36 594 756
%%Title: Enscript Output
%%Creator: GNU Enscript 1.6.5.90
%%CreationDate: Tue Feb 18 12:09:58 2020
%%Orientation: Portrait
%%Pages: (atend)
%%DocumentMedia: Letter 612 792 0 () ()
%%DocumentNeededResources: (atend)
%%EndComments
%%BeginProlog
%%BeginResource: procset Enscript-Prolog 1.6.5 90
%
% Procedures.
%

/_S {	% save current state
  /_s save def
} def
/_R {	% restore from saved state
  _s restore
} def

/S {	% showpage protecting gstate
  gsave
  showpage
  grestore
} bind def

/MF {	% fontname newfontname -> -	make a new encoded font
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  % insert only valid encoding vectors
  encoding_vector length 256 eq {
    newfont /Encoding encoding_vector put
  } if

  newfontname newfont definefont pop
} def

/MF_PS { % fontname newfontname -> -	make a new font preserving its enc
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  newfontname newfont definefont pop
} def

/SF { % fontname width height -> -	set a new font
  /height exch def
  /width exch def

  findfont
  [width 0 0 height 0 0] makefont setfont
} def

/SUF { % fontname width height -> -	set a new user font
  /height exch def
  /width exch def

  /F-gs-user-font MF
  /F-gs-user-font width height SF
} def

/SUF_PS { % fontname width height -> -	set a new user font preserving its enc
  /height exch def
  /width exch def

  /F-gs-user-font MF_PS
  /F-gs-user-font width height SF
} def

/M {moveto} bind def
/s {show} bind def

/Box {	% x y w h -> -			define box path
  /d_h exch def /d_w exch def /d_y exch def /d_x exch def
  d_x d_y  moveto
  d_w 0 rlineto
  0 d_h rlineto
  d_w neg 0 rlineto
  closepath
} def

/bgs {	% x y height blskip gray str -> -	show string with bg color
  /str exch def
  /gray exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    gray setgray
    fill
  grestore
  x y M str s
} def

/bgcs { % x y height blskip red green blue str -> -  show string with bg color
  /str exch def
  /blue exch def
  /green exch def
  /red exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    red green blue setrgbcolor
    fill
  grestore
  x y M str s
} def

% Highlight bars.
/highlight_bars {	% nlines lineheight output_y_margin gray -> -
  gsave
    setgray
    /ymarg exch def
    /lineheight exch def
    /nlines exch def

    % This 2 is just a magic number to sync highlight lines to text.
    0 d_header_y ymarg sub 2 sub translate

    /cw d_output_w cols div def
    /nrows d_output_h ymarg 2 mul sub lineheight div cvi def

    % for each column
    0 1 cols 1 sub {
      cw mul /xp exch def

      % for each rows
      0 1 nrows 1 sub {
        /rn exch def
        rn lineheight mul neg /yp exch def
        rn nlines idiv 2 mod 0 eq {
	  % Draw highlight bar.  4 is just a magic indentation.
	  xp 4 add yp cw 8 sub lineheight neg Box fill
	} if
      } for
    } for

  grestore
} def

% Line highlight bar.
/line_highlight {	% x y width height gray -> -
  gsave
    /gray exch def
    Box gray setgray fill
  grestore
} def

% Column separator lines.
/column_lines {
  gsave
    .1 setlinewidth
    0 d_footer_h translate
    /cw d_output_w cols div def
    1 1 cols 1 sub {
      cw mul 0 moveto
      0 d_output_h rlineto stroke
    } for
  grestore
} def

% Column borders.
/column_borders {
  gsave
    .1 setlinewidth
    0 d_footer_h moveto
    0 d_output_h rlineto
    d_output_w 0 rlineto
    0 d_output_h neg rlineto
    closepath stroke
  grestore
} def

% Do the actual underlay drawing
/draw_underlay {
  ul_style 0 eq {
    ul_str true charpath stroke
  } {
    ul_str show
  } ifelse
} def

% Underlay
/underlay {	% - -> -
  gsave
    0 d_page_h translate
    d_page_h neg d_page_w atan rotate

    ul_gray setgray
    ul_font setfont
    /dw d_page_h dup mul d_page_w dup mul add sqrt def
    ul_str stringwidth pop dw exch sub 2 div ul_h_ptsize -2 div moveto
    draw_underlay
  grestore
} def

/user_underlay {	% - -> -
  gsave
    ul_x ul_y translate
    ul_angle rotate
    ul_gray setgray
    ul_font setfont
    0 0 ul_h_ptsize 2 div sub moveto
    draw_underlay
  grestore
} def

% Page prefeed
/page_prefeed {		% bool -> -
  statusdict /prefeed known {
    statusdict exch /prefeed exch put
  } {
    pop
  } ifelse
} def

% Wrapped line markers
/wrapped_line_mark {	% x y charwith charheight type -> -
  /type exch def
  /h exch def
  /w exch def
  /y exch def
  /x exch def

  type 2 eq {
    % Black boxes (like TeX does)
    gsave
      0 setlinewidth
      x w 4 div add y M
      0 h rlineto w 2 div 0 rlineto 0 h neg rlineto
      closepath fill
    grestore
  } {
    type 3 eq {
      % Small arrows
      gsave
        .2 setlinewidth
        x w 2 div add y h 2 div add M
        w 4 div 0 rlineto
        x w 4 div add y lineto stroke

        x w 4 div add w 8 div add y h 4 div add M
        x w 4 div add y lineto
	w 4 div h 8 div rlineto stroke
      grestore
    } {
      % do nothing
    } ifelse
  } ifelse
} def

% EPSF import.

/BeginEPSF {
  /b4_Inc_state save def    		% Save state for cleanup
  /dict_count countdictstack def	% Count objects on dict stack
  /op_count count 1 sub def		% Count objects on operand stack
  userdict begin
  /showpage { } def
  0 setgray 0 setlinecap
  1 setlinewidth 0 setlinejoin
  10 setmiterlimit [ ] 0 setdash newpath
  /languagelevel where {
    pop languagelevel
    1 ne {
      false setstrokeadjust false setoverprint
    } if
  } if
} bind def

/EndEPSF {
  count op_count sub { pos } repeat	% Clean up stacks
  countdictstack dict_count sub { end } repeat
  b4_Inc_state restore
} bind def

% Check PostScript language level.
/languagelevel where {
  pop /gs_languagelevel languagelevel def
} {
  /gs_languagelevel 1 def
} ifelse
%%EndResource
%%BeginResource: procset Enscript-Encoding-88591 1.6.5 90
/encoding_vector [
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclam       	/quotedbl     	/numbersign   	
/dollar       	/percent      	/ampersand    	/quoteright   	
/parenleft    	/parenright   	/asterisk     	/plus         	
/comma        	/hyphen       	/period       	/slash        	
/zero         	/one          	/two          	/three        	
/four         	/five         	/six          	/seven        	
/eight        	/nine         	/colon        	/semicolon    	
/less         	/equal        	/greater      	/question     	
/at           	/A            	/B            	/C            	
/D            	/E            	/F            	/G            	
/H            	/I            	/J            	/K            	
/L            	/M            	/N            	/O            	
/P            	/Q            	/R            	/S            	
/T            	/U            	/V            	/W            	
/X            	/Y            	/Z            	/bracketleft  	
/backslash    	/bracketright 	/asciicircum  	/underscore   	
/quoteleft    	/a            	/b            	/c            	
/d            	/e            	/f            	/g            	
/h            	/i            	/j            	/k            	
/l            	/m            	/n            	/o            	
/p            	/q            	/r            	/s            	
/t            	/u            	/v            	/w            	
/x            	/y            	/z            	/braceleft    	
/bar          	/braceright   	/tilde        	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclamdown   	/cent         	/sterling     	
/currency     	/yen          	/brokenbar    	/section      	
/dieresis     	/copyright    	/ordfeminine  	/guillemotleft	
/logicalnot   	/hyphen       	/registered   	/macron       	
/degree       	/plusminus    	/twosuperior  	/threesuperior	
/acute        	/mu           	/paragraph    	/bullet       	
/cedilla      	/onesuperior  	/ordmasculine 	/guillemotright	
/onequarter   	/onehalf      	/threequarters	/questiondown 	
/Agrave       	/Aacute       	/Acircumflex  	/Atilde       	
/Adieresis    	/Aring        	/AE           	/Ccedilla     	
/Egrave       	/Eacute       	/Ecircumflex  	/Edieresis    	
/Igrave       	/Iacute       	/Icircumflex  	/Idieresis    	
/Eth          	/Ntilde       	/Ograve       	/Oacute       	
/Ocircumflex  	/Otilde       	/Odieresis    	/multiply     	
/Oslash       	/Ugrave       	/Uacute       	/Ucircumflex  	
/Udieresis    	/Yacute       	/Thorn        	/germandbls   	
/agrave       	/aacute       	/acircumflex  	/atilde       	
/adieresis    	/aring        	/ae           	/ccedilla     	
/egrave       	/eacute       	/ecircumflex  	/edieresis    	
/igrave       	/iacute       	/icircumflex  	/idieresis    	
/eth          	/ntilde       	/ograve       	/oacute       	
/ocircumflex  	/otilde       	/odieresis    	/divide       	
/oslash       	/ugrave       	/uacute       	/ucircumflex  	
/udieresis    	/yacute       	/thorn        	/ydieresis    	
] def
%%EndResource
%%EndProlog
%%BeginSetup
%%IncludeResource: font Courier-Bold
%%IncludeResource: font Courier
/HFpt_w 10 def
/HFpt_h 10 def
/Courier-Bold /HF-gs-font MF
/HF /HF-gs-font findfont [HFpt_w 0 0 HFpt_h 0 0] makefont def
/Courier /F-gs-font MF
/F-gs-font 10 10 SF
/#copies 1 def
% Pagedevice definitions:
gs_languagelevel 1 gt {
  <<
    /PageSize [612 792] 
  >> setpagedevice
} if
%%BeginResource: procset Enscript-Header-simple 1.6.5 90

/do_header {	% print default simple header
  gsave
    d_header_x d_header_y HFpt_h 3 div add translate

    HF setfont
    user_header_p {
      5 0 moveto user_header_left_str show

      d_header_w user_header_center_str stringwidth pop sub 2 div
      0 moveto user_header_center_str show

      d_header_w user_header_right_str stringwidth pop sub 5 sub
      0 moveto user_header_right_str show
    } {
      5 0 moveto fname show
      45 0 rmoveto fmodstr show
      45 0 rmoveto pagenumstr show
    } ifelse

  grestore
} def
%%EndResource
/d_page_w 576 def
/d_page_h 720 def
/d_header_x 0 def
/d_header_y 705 def
/d_header_w 576 def
/d_header_h 15 def
/d_footer_x 0 def
/d_footer_y 0 def
/d_footer_w 576 def
/d_footer_h 0 def
/d_output_w 576 def
/d_output_h 705 def
/cols 1 def
%%EndSetup
%%Page: (1) 1
%%BeginPageSetup
_S
18 36 translate
/pagenum 1 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (1) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(/***************************************************************************************) s
5 681 M
(#---------------------------------------------------------------------------------------------) s
5 670 M
(----------) s
5 659 M
(#NEURONRAIN VIRGO - Cloud, Machine Learning and Queue augmented Linux Kernel Fork-off) s
5 648 M
(#This program is free software: you can redistribute it and/or modify) s
5 637 M
(#it under the terms of the GNU General Public License as published by) s
5 626 M
(#the Free Software Foundation, either version 3 of the License, or) s
5 615 M
(#\(at your option\) any later version.) s
5 604 M
(#This program is distributed in the hope that it will be useful,) s
5 593 M
(#but WITHOUT ANY WARRANTY; without even the implied warranty of) s
5 582 M
(#MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the) s
5 571 M
(#GNU General Public License for more details.) s
5 560 M
(#You should have received a copy of the GNU General Public License) s
5 549 M
(#along with this program.  If not, see <http://www.gnu.org/licenses/>.) s
5 538 M
(#---------------------------------------------------------------------------------------------) s
5 527 M
(-----------) s
5 516 M
(#K.Srinivasan) s
5 505 M
(#NeuronRain Documentation and Licensing: http://neuronrain-documentation.readthedocs.io/en/lat) s
5 494 M
(est/) s
5 483 M
(#Personal website\(research\): https://sites.google.com/site/kuja27/) s
5 472 M
(#---------------------------------------------------------------------------------------------) s
5 461 M
(-----------) s
5 450 M
(*****************************************************************************************/) s
5 417 M
(VIRGO is an operating system kernel forked off from Linux kernel mainline to add cloud functio) s
5 406 M
(nalities \(system calls, modules etc.,\) within kernel itself with machine learning, analytics, ) s
5 395 M
(debugging, queueing support in the deepest layer of OSI stack i.e AsFer, USBmd, KingCobra toge) s
5 384 M
(ther with VIRGO constitute the previous functionalities. Presently there seems to be no cloud ) s
5 373 M
(implementation with fine-grained cloud primitives \(system calls, modules etc.,\) included in ke) s
5 362 M
(rnel itself though there are coarse grained clustering and SunRPC implementations available. V) s
5 351 M
(IRGO complements other Clustering and application layer cloud OSes like cloudstack, openstack ) s
5 340 M
(etc., in these aspects - CloudStack and OpenStack can be deployed on a VIRGO Linux Kernel Clou) s
5 329 M
(d - OpenStack nova compute, neutron network, cinder/swift storage subsystems can be augmented ) s
5 318 M
(to have additional drivers that invoke lowlevel VIRGO syscall and kernel module primitives \(as) s
5 307 M
(suming there are no coincidental replications of functionalities\) thereby acting as a foundati) s
5 296 M
(on to application layer cloud.) s
5 274 M
(Remote Device Invocation , which is an old terminlogy for Internet-Of-Things has already been ) s
5 263 M
(experimented in SunRPC and KOrbit CORBA-in-linux-kernel kernel modules in old linux kernels \(h) s
5 252 M
(ttp://www.csn.ul.ie/~mark/fyp/fypfinal.html - with Solaris MC and example Remote Device Client) s
5 241 M
(-Server Module implementation\). VIRGO Linux with the larger encompassing NeuronRain suite is a) s
5 230 M
(n effort to provide a unified end-to-end application-to-kernel machine-learning propelled clou) s
5 219 M
(d and internet-of-things framework.) s
5 197 M
(Memory pooling:) s
5 186 M
(---------------) s
5 175 M
(Memory pooling is proposed to be implemented by a new virgo_malloc\(\) system call that transpar) s
5 164 M
(ently allocates a block of virtual memory from memory pooled from virtual memory scattered acr) s
5 153 M
(oss individual machines part of the cloud.) s
5 131 M
(CPU pooling or cloud ability in a system call:) s
5 120 M
(----------------------------------------------) s
5 109 M
(Clone\(\) system call is linux specific and internally it invokes sys_clone\(\). All fork\(\),vfork\() s
5 98 M
(\) and clone\(\) system calls internally invoke do_fork\(\). A new system call virgo_clone\(\) is pro) s
5 87 M
(posed to create a thread transparently on any of the available machines on the cloud.This crea) s
5 76 M
(tes a thread on a free or least-loaded machine on the cloud and returns the results.) s
5 54 M
(virgo_clone\(\) is a wrapper over clone\(\) that looks up a map of machines-to-loadfactor and get ) s
5 43 M
(the host with least load and invokes clone\(\) on a function on that gets executed on the host. ) s
5 32 M
(Usual cloud implementations provide userspace API that have something similar to this - call\(f) s
5 21 M
(unction,host\). Loadfactor can be calculated through any of the prominent loadbalancing algorit) s
5 10 M
(hm. Any example userspace code that uses clone\(\) can be replaced with virgo_clone\(\) and all su) s
_R
S
%%Page: (2) 2
%%BeginPageSetup
_S
18 36 translate
/pagenum 2 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (2) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(ch threads will be running in a cloud transparently.Presently Native POSIX threads library\(NPT) s
5 681 M
(L\) and older LinuxThreads thread libraries internally use clone\(\).) s
5 659 M
(Kernel has support for kernel space sockets with kernel_accept\(\), kernel_bind\(\), kernel_connec) s
5 648 M
(t\(\), kernel_sendmsg\(\) and kernel_recvmsg\(\) that can be used inside a kernel module. Virgo driv) s
5 637 M
(er implements virgo_clone\(\) system call that does a kernel_connect\(\) to a remote kernel socket) s
5 626 M
( already __sock_create\(\)-d, kernel_bind\(\)-ed and kernel_accept\(\)-ed and does kernel_sendmsg\(\) ) s
5 615 M
(of the function details and kernel_recvmsg\(\) after function has been executed by clone\(\) in re) s
5 604 M
(mote machine. After kernel_accept\(\) receives a connection it reads the function and parameter ) s
5 593 M
(details. Using these kthread_create\(\) is executed in the remote machine and results are writte) s
5 582 M
(n back to the originating machine. This is somewhat similar to SunRPC but adapted and made lig) s
5 571 M
(htweight to suit virgo_clone\(\) implementation without any external data representation.) s
5 549 M
(Experimental Prototype) s
5 538 M
(-----------------------) s
5 527 M
(virgo_clone\(\) system call and a kernel module virgocloudexec which implements Sun RPC interfac) s
5 516 M
(e have been implemented.) s
5 494 M
(VIRGO - loadbalancer to get the host:ip of the least loaded node) s
5 483 M
(----------------------------------------------------------------) s
5 472 M
(Loadbalancer option 1 - Centralized loadbalancer registry that tracks load:) s
5 461 M
(---------------------------------------------------------------------------) s
5 439 M
(Virgo_clone\(\) system call needs to lookup a registry or map of host-to-load and get the least ) s
5 428 M
(loaded host:ip from it. This requires a  load monitoring code to run periodically and update t) s
5 417 M
(he map. If this registry is located on a single machine then simultaneous virgo_clone\(\) calls ) s
5 406 M
(from many machines on the cloud could choke the registry. Due to this, loadbalancer registry n) s
5 395 M
(eeds to run on a high-end machine. Alternatively,each machine can have its own view of the loa) s
5 384 M
(d and multiple copies of load-to-host registries can be stored in individual machines. Synchro) s
5 373 M
(nization of the copies becomes a separate task in itself\(Cache coherency\). Either way gives a ) s
5 362 M
(tradeoff between accuracy, latency and efficiency. ) s
5 340 M
(Many application level userspace load monitoring tools are available but as virgo_clone\(\) is i) s
5 329 M
(n kernel space, it needs to be investigated if kernel-to-kernel loadmonitoring can be done wit) s
5 318 M
(hout userspace data transport.Most Cloud API explicitly invoke a function on a host. If this f) s
5 307 M
(unctionality is needed, virgo_clone\(\) needs to take host:ip address as extra argument,but it r) s
5 296 M
(educes transparent execution.) s
5 274 M
(\(Design notes for LB option 1 handwritten by myself are at :http://sourceforge.net/p/virgo-lin) s
5 263 M
(ux/code-0/HEAD/tree/trunk/virgo-docs/MiscellaneousOpenSourceDesignAndAcademicResearchNotes.pdf) s
5 252 M
(\)) s
5 230 M
(Loadbalancer option 2 - Linux Psuedorandom number generator based load balancer\(experimental\) ) s
5 219 M
(instead of centralized registry that tracks load:) s
5 208 M
(----------------------------------------------------------------------------------------------) s
5 197 M
(------------) s
5 175 M
(Each virgo_clone\(\) client has a PRG which is queried \(/dev/random or /dev/urandom\) to get the ) s
5 164 M
(id of the host to send the next virgo_clone\(\) function to be executed ) s
5 153 M
(Expected number of requests per node is derived as:) s
5 131 M
(expected number of requests per node = summation\(each_value_for_the_random_variable_for_number) s
5 120 M
(_of_requests * probability_for_each_value\) where random variable ranges from 1 to k where N is) s
5 109 M
( number of processors and k is the number of requests to be distributed on N nodes) s
5 87 M
(=expected number of requests per node = \(math.pow\(N, k+2\) - k*math.pow\(N,2\) + k*math.pow\(N,1\) ) s
5 76 M
(- 1\) / \(math.pow\(N, k+3\) - 2*math.pow\(N,k+2\) + math.pow\(N,k+1\)\)) s
5 54 M
(This loadbalancer is dependent on efficacy of the PRG and since each request is uniformly, ide) s
5 43 M
(ntically, independently distributed use of PRG) s
5 32 M
(would distribute requests evenly. This obviates the need for loadtracking and coherency of the) s
5 21 M
( load-to-host table.) s
_R
S
%%Page: (3) 3
%%BeginPageSetup
_S
18 36 translate
/pagenum 3 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (3) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(\(Design notes for LB option 2 handwritten by myself at :http://sourceforge.net/p/virgo-linux/c) s
5 681 M
(ode-0/HEAD/tree/trunk/virgo-docs/MiscellaneousOpenSourceDesignAndAcademicResearchNotes.pdf\)) s
5 648 M
(\(python script in virgo-python-src/\)) s
5 626 M
(**********************************************************************************************) s
5 615 M
(******) s
5 604 M
(Implemented VIRGO Linux components \(as on 7 March 2016\)) s
5 593 M
(**********************************************************************************************) s
5 582 M
(******) s
5 571 M
(1. cpupooling virtualization - VIRGO_clone\(\) system call and VIRGO cpupooling driver by which ) s
5 560 M
(a remote procedure can be invoked in kernelspace.\(port: 10000\)) s
5 549 M
(2. memorypooling virtualization - VIRGO_malloc\(\), VIRGO_get\(\), VIRGO_set\(\), VIRGO_free\(\) syste) s
5 538 M
(m calls and VIRGO memorypooling driver by which kernel memory can be allocated in remote node,) s
5 527 M
( written to, read and freed - A kernelspace memcache-ing.\(port: 30000\)) s
5 516 M
(3. filesystem virtualization - VIRGO_open\(\), VIRGO_read\(\), VIRGO_write\(\), VIRGO_close\(\) system) s
5 505 M
( calls and VIRGO cloud filesystem driver by which file IO in remote node can be done in kernel) s
5 494 M
(space.\(port: 50000\)) s
5 483 M
(4. config - VIRGO config driver for configuration symbols export.) s
5 472 M
(5. queueing - VIRGO Queuing driver kernel service for queuing incoming requests, handle them w) s
5 461 M
(ith workqueue and invoke KingCobra service routines in kernelspace. \(port: 60000\)) s
5 450 M
(6. cloudsync - kernel module for synchronization primitives \(Bakery algorithm etc.,\) with expo) s
5 439 M
(rted symbols that can be used in other VIRGO cloud modules for critical section lock\(\) and unl) s
5 428 M
(ock\(\)) s
5 417 M
(7. utils - utility driver that exports miscellaneous kernel functions that can be used across ) s
5 406 M
(VIRGO Linux kernel) s
5 395 M
(8. EventNet - eventnet kernel driver to vfs_read\(\)/vfs_write\(\) text files for EventNet vertex ) s
5 384 M
(and edge messages \(port: 20000\)) s
5 373 M
(9. Kernel_Analytics - kernel module that reads machine-learnt config key-value pairs set in /e) s
5 362 M
(tc/virgo_kernel_analytics.conf. Any machine learning software can be used to get the key-value) s
5 351 M
( pairs for the config. This merges three facets - Machine Learning, Cloud Modules in VIRGO Lin) s
5 340 M
(ux-KingCobra-USBmd , Mainline Linux Kernel ) s
5 329 M
(10. Testcases and kern.log testlogs for the above) s
5 318 M
(11. SATURN program analysis wrapper driver.) s
5 296 M
(Thus VIRGO Linux at present implements a minimum cloud OS \(with cloud-wide cpu, memory and fil) s
5 285 M
(e system management\) over Linux and potentially fills in a gap to integrate both software and ) s
5 274 M
(hardware into cloud with machine learning and analytics abilities that is absent in applicatio) s
5 263 M
(n layer cloud implementations. Thus VIRGO cloud is an IoT operating system kernel too that ena) s
5 252 M
(bles any hardware to be remote controlled. Data analytics using AsFer can be done by just invo) s
5 241 M
(king requisite code from a kernelspace driver above and creating an updated driver binary \(or\)) s
5 230 M
( by kernel_analytics module which reads the userland machine-learnt config. ) s
5 208 M
(**********************************************************************************************) s
5 197 M
(*********************************) s
5 186 M
(VIRGO ToDo and NiceToHave Features \(list is quite dynamic and might be rewritten depending on ) s
5 175 M
(feasibility - longterm with no deadline\)) s
5 164 M
(**********************************************************************************************) s
5 153 M
(*********************************) s
5 142 M
(\(FEATURE - DONE-minimum separate config file support in client and kernel service \)1. More Sop) s
5 131 M
(histicated VIRGO config file and read_virgo_config\(\) has to be invoked on syscall clients virg) s
5 120 M
(o_clone and virgo_malloc also. Earlier config was being read by kernel module only which would) s
5 109 M
( work only on a single machine. A separate config module kernel service has been added for fut) s
5 98 M
(ure use while exporting kernel-wide configuration related symbols. VIRGO config files have bee) s
5 87 M
(n split into /etc/virgo_client.conf and /etc/virgo_cloud.conf to delink the cloud client and k) s
5 76 M
(ernel service config parameters reading and to do away with oft occurring symbol lookup errors) s
5 65 M
( and multiple definition errors for num_cloud_nodes and node_ip_addrs_in_cloud - these errors ) s
5 54 M
(are frequent in 3.15.5 kernel than 3.7.8 kernel. Each VIRGO module and system call now reads t) s
5 43 M
(he config file independent of others - there is a read_virgo_config_<module>_<client_or_servic) s
5 32 M
(e>\(\) function variant for each driver and system call. Though at present smacks of a replicate) s
5 21 M
(d code, in future the config reads for each component \(system call or module\) might vary signi) s
5 10 M
(ficantly depending on necessities.  New kernel module config has been added in drivers/virgo. ) s
_R
S
%%Page: (4) 4
%%BeginPageSetup
_S
18 36 translate
/pagenum 4 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (4) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(This is for future prospective use as a config export driver that can be looked up by any othe) s
5 681 M
(r VIRGO module for config parameters.  include/linux/virgo_config.h has the declarations for a) s
5 670 M
(ll the config variables declared within each of the VIRGO kernel modules.  Config variables in) s
5 659 M
( each driver and system call have been named with prefix and suffix to differentiate the modul) s
5 648 M
(e and/or system call it serves.  In geographically distributed cloud virgo_client.conf has to ) s
5 637 M
(be in client nodes and virgo_cloud.conf has to be in cloud nodes. For VIRGO Queue - KingCobra ) s
5 626 M
(REQUEST-REPLY peer-to-peer messaging system same node can have virgo_client.conf and virgo_clo) s
5 615 M
(ud.conf.  Above segregation largely simplifies the build process as each module and system cal) s
5 604 M
(l is independently built without need for a symbol to be exported from other module by pre-loa) s
5 593 M
(ding it.\(- from commit comments done few months ago\)) s
5 560 M
(\(FEATURE - Special case implementation DONE\) 2. Object Marshalling and Unmarshalling \(Serializ) s
5 549 M
(ation\) Features - Feature 4 is a marshalling feature too as Python world PyObjects are seriali) s
5 538 M
(zed into VIRGO linux kernel and unmarshalled back bottom-up with CPython and Boost::Python C++) s
5 527 M
( invocations - CPython and Boost internally take care of serialization.) s
5 505 M
(\(FEATURE - DONE\) 3. Virgo_malloc\(\), virgo_set\(\), virgo_get\(\) and virgo_free\(\) syscalls that vi) s
5 494 M
(rtualize the physical memory across all cloud nodes into a single logical memory behemoth \(NUM) s
5 483 M
(A visavis UMA\). \(There are random crashes in copy_to_user and copy_from_user in syscall path f) s
5 472 M
(or VIRGO memory pooling commands that were investigated but turned out to be mystery\). These c) s
5 461 M
(rashes have either been resolved or occur less in 3.15.5 and 4.1.5 kernels.) s
5 450 M
(Initial Design Handwritten notes committed at: http://sourceforge.net/p/virgo-linux/code-0/210) s
5 439 M
(/tree/trunk/virgo-docs/VIRGO_Memory_Pooling_virgomalloc_initial_design_notes.pdf) s
5 417 M
(\(FEATURE - DONE\) 4. Integrated testing of AsFer-VIRGO Linux Kernel request roundtrip - invocat) s
5 406 M
(ion of VIRGO linux kernel system calls from AsFer Python via C++ or C extensions - Commits for) s
5 395 M
( this have been done on 29 January 2016. This unifies userlevel applications and kernelspace m) s
5 384 M
(odules so that AsFer Python makes VIRGO linux kernel an extension. Following is schematic diag) s
5 373 M
(ram and More details in commit notes below.) s
5 351 M
(4.1 Schematic Diagram:) s
5 340 M
(-----------------------) s
5 329 M
(        AsFer Python -----> Boost::Python C++ Extension ------> VIRGO memory system calls ----) s
5 318 M
(----> VIRGO Linux Kernel Memory Drivers) s
5 307 M
(        /\\                                                                                    ) s
5 296 M
(          V) s
5 285 M
(         |                                                                                    ) s
5 274 M
(          |) s
5 263 M
(         ---------------------------------------------<---------------------------------------) s
5 252 M
(-----------) s
5 230 M
(        AsFer Python -----> CPython Extensions ------> VIRGO memory system calls --------> VIR) s
5 219 M
(GO Linux Kernel Memory Drivers) s
5 208 M
(         /\\                                                                                   ) s
5 197 M
(          V) s
5 186 M
(         |                                                                                    ) s
5 175 M
(          |) s
5 164 M
(         ---------------------------------------------<---------------------------------------) s
5 153 M
(-----------) s
5 131 M
(\(FEATURE - DONE\)5. Multithreading of VIRGO cloudexec kernel module \(if not already done by ker) s
5 120 M
(nel module subsystem internally\)) s
5 98 M
(\(FEATURE - DONE\) 6. Sophisticated queuing and persistence of CPU and Memory pooling requests i) s
5 87 M
(n Kernel Side \(by possibly improving already existing kernel workqueues\). Either open source i) s
5 76 M
(mplementations like ZeroMQ/ActiveMQ can be used or Queuing implementation has to be written fr) s
5 65 M
(om scratch or both. ActiveMQ supports REST APIs and is JMS implementation. This feature has be) s
5 54 M
(en marked completed because recently NeuronRain AsFer backend has been updated to support King) s
5 43 M
(Cobra REQUEST_REPLY.queue as a datasource for Streaming Abstract Generator. By enabling use_as) s
5 32 M
(_kingcobra_service=1 in cpupooling and memorypooling VIRGO drivers, any incoming CPU and Memor) s
5 21 M
(y related request can be routed to KingCobra by linux workqueue in VIRGO queue and disk persis) s
5 10 M
(ted \(/var/log/REQUEST_REPLY.queue\) by KingCobra servicerequest recipient. Also Kafka Publisher) s
_R
S
%%Page: (5) 5
%%BeginPageSetup
_S
18 36 translate
/pagenum 5 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (5) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(/Subscriber have been implemented in NeuronRain AsFer which invoke Streaming Abstract Generato) s
5 681 M
(r with KingCobra REQUEST_REPLY.queue as datasource to publish persisted already received CPU a) s
5 670 M
(nd Memory requests to Kafka Message Queue. Thus queuing and persistence for VIRGO CPU and Memo) s
5 659 M
(ry is in place. ZeroMQ does not have persistence and is used for NeuronRain client side Router) s
5 648 M
(-Dealer concurrent request servicing pattern.) s
5 626 M
(\(FEATURE - DONE-Minimum Functionality\) 7. Integration of Asfer\(AstroInfer\) algorithm codes int) s
5 615 M
(o VIRGO which would add machine learning capabilities into VIRGO - That is, VIRGO cloud subsys) s
5 604 M
(tem which is part of a linux kernel installation "learns" and "adapts" to the processes that a) s
5 593 M
(re executed on VIRGO. This catapults the power of the Kernel and Operating System into an arti) s
5 582 M
(ficially \(rather approximately naturally\) intelligent computing platform \(a software "brain"\).) s
5 571 M
( For example VIRGO can "learn" about "execution times" of processes and suitably act for futur) s
5 560 M
(e processes. PAC Learning of functions could be theoretical basis for this.  Initial commits f) s
5 549 M
(or Kernel Analytics Module which reads the /etc/virgo_kernel_analytics.conf config have been d) s
5 538 M
(one. This config file virgo_kernel_analytics.conf having csv\(s\) of key-value pairs of analytic) s
5 527 M
(s variables is set by AsFer or any other Machine Learning code.  With this VIRGO Linux Kernel ) s
5 516 M
(is endowed with abilities to dynamically evolve than being just a platform for user code. Impl) s
5 505 M
(ications are huge - for example, a config variable "MaxNetworkBandwidth=255" set by the ML min) s
5 494 M
(er in userspace based on a Perceptron or Logistic Regression executed on network logs can be r) s
5 483 M
(ead by a kernel module that limits the network traffic to 255Mbps. Thus kernel is no longer a ) s
5 472 M
(static predictable blob behemoth. With this, VIRGO is an Internet-of-Things kernel that does a) s
5 461 M
(nalytics and based on analytics variable values integrated hardware can be controlled across t) s
5 450 M
(he cloud through remote kernel module function invocation. This facility has been made dynamic) s
5 439 M
( with Boost::Python C++ and CPython extensions that permit flow of objects from machine learnt) s
5 428 M
( AsFer kernel analytics variables to VIRGO Linux Kernel memory drivers via VIRGO system calls ) s
5 417 M
(directly and back - Commits on 29 January 2016 - this should obviate re-reading /etc/virgo_ker) s
5 406 M
(nel_analytics.conf and is an exemplary implementation which unifies C++/Python into C/Kernel.) s
5 384 M
(-----------------------------------------) s
5 373 M
(Example scenario 1 without implementation: ) s
5 362 M
(-----------------------------------------) s
5 351 M
(- Philips Hue IoT mobile app controlled bulb - http://www2.meethue.com/en-xx/) s
5 340 M
(- kernel_analytics module learns key-value pairs from the AsFer code and exports it VIRGO kern) s
5 329 M
(el wide) s
5 318 M
(- A driver function with in bulb embedded device driver can be invoked through VIRGO cpupoolin) s
5 307 M
(g \(invoked from remote virgo_clone\(\) system_call\)) s
5 296 M
(based on if-else clause of the kernel_analytics variable i.e remote_client invokes virgo_clone) s
5 285 M
(\(\) with function argument "lights on" which is routed to another cloud node. The recipient clo) s
5 274 M
(ud node "learns" from AsFer kernel_analytics that Voltage is low or Battery is low from logs a) s
5 263 M
(nd decides to switch in high beam or low beam.) s
5 252 M
(-----------------------------------------) s
5 241 M
(Example scenario 2 without implementation: ) s
5 230 M
(-----------------------------------------) s
5 219 M
(- A swivel security camera driver is remotely invoked via virgo_clone\(\) in the VIRGO cloud.) s
5 208 M
(- The camera driver uses a machine learnt variable exported by kernel_analytics-and-AsFer to p) s
5 197 M
(an the camera by how much degrees.) s
5 186 M
(----------------------------------------------------------------------------------------------) s
5 175 M
(---------) s
5 164 M
(Example scenario 3 without implementation - probably one of the best applications of NeuronRai) s
5 153 M
(n IoT OS:) s
5 142 M
(----------------------------------------------------------------------------------------------) s
5 131 M
(---------) s
5 120 M
(- Autonomous Driverless Automobiles - a VIRGO driver for a vehicle which learns kernel analyti) s
5 109 M
(cs variables \(driving directions\) set by kernel_analytics driver and AsFer Machine Learning. A) s
5 98 M
( naive algorithm for Driverless Car \(with some added modifications over A-Star and Motion plan) s
5 87 M
(ning algorithms\):) s
5 76 M
(        - AsFer analytics receives obstacle distance data 360+360 degrees \(vertical and horizo) s
5 65 M
(ntal\) around the vehicle \(e.g ultrasound sensors\) which is updated in a Spark DataFrame table ) s
5 54 M
(with high frequency \(100 times per second\).) s
5 43 M
(        - VIRGO Linux kernel on vehicle has two special drivers for Gear-Clutch-Break-Accelera) s
5 32 M
(tor-Fuel\(GCBAF\) and Steering listening on some ports.) s
5 21 M
(        - AsFer analytics with high frequency computes threshold variables for applying break,) s
5 10 M
( clutch, gear, velocity, direction, fuel changes which are written to kernel_analytics.conf re) s
_R
S
%%Page: (6) 6
%%BeginPageSetup
_S
18 36 translate
/pagenum 6 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (6) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(altime based on distance data from Spark table.) s
5 681 M
(        - These analytics variables are continuously read by GCBAF and Steering drivers which ) s
5 670 M
(autopilot the vehicle.) s
5 659 M
(        - Above applies to Fly-by-wire aeronautics too with appropriate changes in analytics v) s
5 648 M
(ariables computed.) s
5 637 M
(        - The crucial parameter is the response time in variable computation and table updates) s
5 626 M
( which requires a huge computing power unless the vehicle is hooked onto a Spark cloud in moti) s
5 615 M
(on by wireless which process the table and compute analytic variables.) s
5 593 M
(E.g. Autopilot in Tesla Cars processes Petabytes of information \(Smooth-as-Silk algorithm\) fro) s
5 582 M
(m sensors which are fed to neural networks computed on a cloud - https://www.teslarati.com/tes) s
5 571 M
(la-firmware-v8-1-17-22-26-autopilot-2-0-smooth-silk-update-video/.) s
5 549 M
(----------------------------------------------) s
5 538 M
(References for Machine Learning + Linux Kernel) s
5 527 M
(----------------------------------------------) s
5 516 M
(7.1 KernTune - http://repository.uwc.ac.za/xmlui/bitstream/handle/10566/53/Yi_KernTune\(2007\).p) s
5 505 M
(df?sequence=3) s
5 494 M
(7.2 Self-learning, Predictive Systems - https://icri-ci.technion.ac.il/projects/past-projects/) s
5 483 M
(machine-learning-for-architecture-self-learning-predictive-computer-systems/) s
5 472 M
(7.3 Linux Process Scheduling and Machine Learning - http://www.cs.ucr.edu/~kishore/papers/tenc) s
5 461 M
(on.pdf) s
5 450 M
(7.4 Network Latency and Machine Learning - https://users.soe.ucsc.edu/~slukin/rtt_paper.pdf) s
5 439 M
(7.5 Machine Learning based Meta-Scheduler for Multicore processors - https://books.google.co.i) s
5 428 M
(n/books?id=1GWcHmCrl0QC&pg=PA528&lpg=PA528&dq=linux+kernel+machine+learning&source=bl&ots=zfJs) s
5 417 M
(q_uu5q&sig=mMIUZ-oyJIwZXtYj4HntrQE8NSk&hl=en&sa=X&ved=0CCAQ6AEwATgKahUKEwjs9sqF9vPIAhVBFZQKHbN) s
5 406 M
(tA6A ) s
5 395 M
( ) s
5 384 M
(8. A Symmetric Multi Processing subsystem Scheduler that virtualizes all nodes in cloud \(proba) s
5 373 M
(bly this would involve improving the loadbalancer into a scheduler with priority queues\)) s
5 351 M
(\(FEATURE - ONGOING\) 9. Virgo is an effort to virtualize the cloud as a single machine - Here c) s
5 340 M
(loud is not limited to servers and desktops but also mobile devices that run linux variants li) s
5 329 M
(ke Android, and other Mobile OSes. In the longterm, Virgo may have to be ported or optimized f) s
5 318 M
(or handheld devices. Boost::Python AsFer-VIRGO system call invocations implemented in NeuronRa) s
5 307 M
(in is framework for implementing python applications interfacing with kernel. If deployed on M) s
5 296 M
(obile processors \(e.g by overlaying Android Kernel with VIRGO layer\) there are IDEs like QPyth) s
5 285 M
(on to develop python apps for Android.) s
5 263 M
(\(FEATURE - DONE\) 10. Memory Pooling Subsystem Driver - Virgo_malloc\(\), Virgo_set\(\), Virgo_get\() s
5 252 M
(\) and Virgo_free\(\) system calls and their Kernel Module Implementations. In addition to syscal) s
5 241 M
(l path, telnet or userspace socket client interface is also provided for both VIRGO CPU poolin) s
5 230 M
(g\(virgo_clone\(\)\) and VIRGO Memory Pooling Drivers.) s
5 208 M
(\(FEATURE - DONE\) 11. Virgo Cloud File System with virgo_cloud_open\(\), virgo_cloud_read\(\) , vir) s
5 197 M
(go_cloud_write\(\) and virgo_cloud_close\(\) commands invoked through telnet path has been impleme) s
5 186 M
(nted that transcends disk storage in all nodes in the cloud. It is also fanciful feature addit) s
5 175 M
(ion that would make VIRGO a complete all-pervading cloud platform. The remote telnet clients s) s
5 164 M
(end the file path and the buf to be read or data to be written. The Virgo File System kernel d) s
5 153 M
(river service creates a unique Virgo File Descriptor for each struct file* opened by filp_open) s
5 142 M
(\(\) and is returned to client. Earlier design option to use a hashmap \(linux/hashmap.h\) looked ) s
5 131 M
(less attractive as file desciptor is an obvious unique description for open file and also map ) s
5 120 M
(becomes unscalable. The kernel upcall path has been implemented \(paramIsExecutable=0\) and may ) s
5 109 M
(not be necessary in most cases and all above cloudfs commands work in kernelspace using VFS ca) s
5 98 M
(lls.) s
5 76 M
(\(FEATURE - DONE\) 12. VIRGO Cloud File System commands through syscall paths - virgo_open\(\),vir) s
5 65 M
(go_close\(\),virgo_read\(\) and virgo_write\(\). All the syscalls have been implemented with testcas) s
5 54 M
(es and more bugs fixed. After fullbuild and testing, virgo_open\(\) and virgo_read\(\) work and co) s
5 43 M
(py_to_user\(\) is working.) s
5 21 M
(\(FEATURE - DONE\) 13. VIRGO memory pooling feature is also a distributed key-value store simila) s
5 10 M
(r to other prominent key-store software like BigTable implementations, Dynamo, memory caching ) s
_R
S
%%Page: (7) 7
%%BeginPageSetup
_S
18 36 translate
/pagenum 7 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (7) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(tools etc., but with a difference that VIRGO mempool is implemented as part of Linux Kernel it) s
5 681 M
(self thus circumventing userspace latencies. Due to Kernel space VIRGO mempool has an added po) s
5 670 M
(wer to store and retrieve key-value pair in hardware devices directly which otherwise is diffi) s
5 659 M
(cult in userspace implementations.) s
5 637 M
(14. VIRGO memory pooling can be improved with disk persistence for in-memory key-value store u) s
5 626 M
(sing virgo_malloc\(\),virgo_set\(\),virgo_get\(\) and virgo_free\(\) calls. Probably this might be jus) s
5 615 M
(t a set of invocations of read and write ops in disk driver or using sysfs. Probably this coul) s
5 604 M
(d be redundant as the VIRGO filesystem primitives have been implemented that write to a remote) s
5 593 M
( host's filesystem in kernelspace. ) s
5 571 M
(15. \(FEATURE-DONE\) Socket Debugging, Program Analysis and Verification features for user code ) s
5 560 M
(that can find bugs statically. Socket skbuff debug utility and SATURN Program Analysis Softwar) s
5 549 M
(e has been integrated into NEURONRAIN VIRGO Linux Kernel.) s
5 527 M
(16\(FEATURE - DONE-Minimum Functionality\). Operating System Logfile analysis using Machine Lear) s
5 516 M
(ning code in AstroInfer for finding patterns of processes execution and learn rules from the l) s
5 505 M
(og. Kernel_Analytics VIRGO module reads /etc/virgo_kernel_analytics.conf config key-value pair) s
5 494 M
(s which are set by AsFer or other Machine Learning Software. At present an Apache Spark usecas) s
5 483 M
(e that mines Uncomplicated Fire Wall logs in kern.log for most prominent source IP has been im) s
5 472 M
(plemented in AsFer codebase : http://sourceforge.net/p/asfer/code/704/tree/python-src/SparkKer) s
5 461 M
(nelLogMapReduceParser.py . This is set as a key-value config in /etc/virgo_kernel_analytics.co) s
5 450 M
(nf read and exported by kernel_analytics module.) s
5 428 M
(17. Implementations of prototypical Software Transactional Memory and LockFree Datastructures ) s
5 417 M
(for VIRGO memory pooling.) s
5 395 M
(18. Scalability features for Multicore machines - references:) s
5 384 M
(\(http://halobates.de/lk09-scalability.pdf, http://pdos.csail.mit.edu/papers/linux:osdi10.pdf\)) s
5 362 M
(19. Read-Copy-Update algorithm implementation for VIRGO memory pooling that supports multiple ) s
5 351 M
(simultaneous versions of memory for readers - widely used in redesigned Linux Kernel.) s
5 329 M
(20. \(FEATURE - SATURN integration - minimum functionality DONE\) Program Comprehension features) s
5 318 M
( as an add-on described in : https://sites.google.com/site/kuja27/PhDThesisProposal.pdf?attred) s
5 307 M
(irects=0. SATURN program analysis has been integrated into VIRGO linux with a stub driver.) s
5 285 M
(21. \(FEATURE - DONE\) Bakery Algorithm implementation - cloudsync kernel module) s
5 263 M
(22. \(FEATURE - ONGOING\) Implementation of Distributed Systems primitives for VIRGO cloud viz.,) s
5 252 M
( Logical Clocks, Termination Detection, Snapshots, Cache Coherency subsystem etc.,\(as part of ) s
5 241 M
(cloudsync driver module\). Already a simple timestamp generation feature has been implemented f) s
5 230 M
(or KingCobra requests with <ipaddress>:<localmachinetimestamp> format) s
5 208 M
(23. \(FEATURE - minimum functionality DONE\) Enhancements to kmem if it makes sense, because it ) s
5 197 M
(is better to rely on virgo_malloc\(\) for per machine memory management and wrap it around with ) s
5 186 M
(a cloudwide VIRGO Unique ID based address lookup implementation of which is already in place.) s
5 175 M
(Kernel Malloc syscall kmalloc\(\) internally works as follows:) s
5 164 M
(        - kmem_cache_t object has pointers to 3 lists) s
5 153 M
(        - These 3 lists are full objects SLAB list, partial objects SLAB list and free objects) s
5 142 M
( SLAB list - all are lists of objects of same size) s
5 131 M
( and cache_cache is the global list of all caches created thus far.) s
5 120 M
(        - Any kmalloc\(\) allocation searches partial objects SLAB list and allocates a memory b) s
5 109 M
(lock with kmem_cache_alloc\(\) from the first SLAB available - returned to caller.) s
5 98 M
(        - Any kfree\(\) returns an object to a free SLAB list) s
5 87 M
(        - Full SLABs are removed from partial SLAB list and appended to full SLAB list) s
5 76 M
(        - SLABs are virtual memory pages created with kmem_cache_create) s
5 65 M
(        - Each SLAB in SLABs list has blocks of similar sized objects \(e.g. multiples of two\).) s
5 54 M
( Closest matching block is returned and fragmentation is minimized \(incidentally this is the k) s
5 43 M
(napsack and packing optimization LP problem and thus NP-complete\).) s
5 21 M
(KERNELSPACE:) s
5 10 M
(VIRGO address translation table already implements a tree registry of vtables each of capacity) s
_R
S
%%Page: (8) 8
%%BeginPageSetup
_S
18 36 translate
/pagenum 8 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (8) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
( 3000 that keep track of kmalloc\(\) allocations across all cloud nodes. Implementation of SLAB ) s
5 681 M
(allocator for kmalloc\(\) creates a kmem_cache\(s\) of similar sized objects and kmem_cache_alloc\() s
5 670 M
(\) allocates from these caches. kmalloc\(\) already does lot of per-machine optimizations. VIRGO ) s
5 659 M
(vtable registry tree maintained in VIRGO memory syscall end combined with per-machine kmalloc\() s
5 648 M
(\) cache_cache already look sufficient. Instrumenting kmem_cache_create\(\) with #ifdef SLAB_CLOU) s
5 637 M
(D_MALLOC flags to do RPC looks superfluous. Hence marking this action item as done. Any furthe) s
5 626 M
(r optimization can be done on top of existing VIRGO address translation table struct - e.g boo) s
5 615 M
(kkeeping flags, function pointers etc.,.) s
5 604 M
(USERSPACE: sbrk\(\) and brk\(\) are no longer used internally in malloc\(\) library routines. Instea) s
5 593 M
(d mmap\(\) has replaced it \(http://web.eecs.utk.edu/courses/spring2012/cs360/360/notes/Malloc1/l) s
5 582 M
(ecture.html, http://web.eecs.utk.edu/courses/spring2012/cs360/360/notes/Malloc1/diff.html\).) s
5 560 M
(24.\(FEATURE - ONGOING\) Cleanup the code and remove unnecessary comments.) s
5 538 M
(25.\(FEATURE - DONE\) Documentation - This design document is also a documentation for commit no) s
5 527 M
(tes and other build and debugging technical details. Doxygen html cross-reference documentatio) s
5 516 M
(n for AsFer, USBmd, VIRGO, KingCobra and Acadpdrafts has been created along with summed-up des) s
5 505 M
(ign document and committed to GitHub Repository at https://github.com/shrinivaasanka/Krishna_i) s
5 494 M
(Research_DoxygenDocs) s
5 472 M
(26. \(FEATURE - DONE\) Telnet path to virgo_cloud_malloc,virgo_cloud_set and virgo_cloud_get has) s
5 461 M
( been tested and working. This is similar to memcached but stores key-value in kernelspace \(an) s
5 450 M
(d hence has the ability to write to and retrieve from any device driver memory viz., cards, ha) s
5 439 M
(ndheld devices\).An optional todo is to write a script or userspace socket client that connects) s
5 428 M
( to VIRGO mempool driver for these commands.) s
5 406 M
(27. Augment the Linux kernel workqueue implementation \(http://lxr.free-electrons.com/source/ke) s
5 395 M
(rnel/workqueue.c\) with disk persistence if feasible and doesn't break other subsystems - this ) s
5 384 M
(might require additional persistence flags in work_struct and additional #ifdefs in most of th) s
5 373 M
(e queue functions that write and read from the disk. Related to item 6 above.) s
5 351 M
(28.\(FEATURE - DONE\) VIRGO queue driver with native userspace queue and kernel workqueue-handle) s
5 340 M
(r framework that is optionally used for KingCobra and is invoked through VIRGO cpupooling and ) s
5 329 M
(memorypooling drivers. \(Schematic in http://sourceforge.net/p/kcobra/code-svn/HEAD/tree/KingCo) s
5 318 M
(braDesignNotes.txt and http://sourceforge.net/p/acadpdrafts/code/ci/master/tree/Krishna_iResea) s
5 307 M
(rch_opensourceproducts_archdiagram.pdf\)) s
5 285 M
(29.\(FEATURE - DONE\) KERNELSPACE EXECUTION ACROSS CLOUD NODES which geographically distribute u) s
5 274 M
(serspace and kernelspace execution creating ) s
5 263 M
(a logical abstraction for a cloudwide virtualized kernel:) s
5 241 M
(        Remote Cloud Node Client) s
5 230 M
(        \(cpupooling, eventnet, memorypooling, cloudfs, queueing - telnet and syscalls clients\)) s
5 219 M
(                |) s
5 208 M
(                |) s
5 197 M
( \(Userspace\)    |) s
5 186 M
(                |-------------------------------------Kernel Sockets--------------------------) s
5 175 M
(-----------> Remote Cloud Node Service) s
5 164 M
(                                                                        \(VIRGO cpupooling, mem) s
5 153 M
(orypooling, cloudfs, queue, KingCobra drivers\)) s
5 142 M
(                                                                                              ) s
5 131 M
(                |) s
5 120 M
(                                                                                              ) s
5 109 M
(                |) s
5 98 M
(                                                                                              ) s
5 87 M
(                |  \(Kernelspace execution\)) s
5 76 M
(                                                                                              ) s
5 65 M
(                |) s
5 54 M
(                                                                                              ) s
5 43 M
(                V) s
5 32 M
(                <-------------------------------------Kernel Sockets--------------------------) s
5 21 M
(-------------------     ) s
5 10 M
(                |) s
_R
S
%%Page: (9) 9
%%BeginPageSetup
_S
18 36 translate
/pagenum 9 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (9) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(                |) s
5 681 M
(                |) s
5 670 M
( \(Userspace\)    |) s
5 626 M
(30. \(FEATURE - DONE\) VIRGO platform as on 5 May 2014 implements a minimum set of features and ) s
5 615 M
(kernelsocket commands required for a cloud OS kernel: CPU virtualization\(virgo_clone\), Memory ) s
5 604 M
(virtualization\(virgo_malloc,virgo_get,virgo_set,virgo_free\) and a distributed cloud file syste) s
5 593 M
(m\(virgo_open,virgo_close,virgo_read,virgo_write\) on the cloud nodes and thus gives a logical v) s
5 582 M
(iew of one unified, distributed linux kernel across all cloud nodes that splits userspace and ) s
5 571 M
(kernelspace execution across cloud as above.) s
5 549 M
(31. \(FEATURE - DONE\) VIRGO Queue standalone kernel service has been implemented in addition to) s
5 538 M
( paths in schematics above. VIRGO Queue listens on hardcoded port 60000 and enqueues the incom) s
5 527 M
(ing requests to VIRGO queue which is serviced by KingCobra:) s
5 505 M
(VIRGO Queue client\(e.g telnet\) ------> VIRGO Queue kernel service ---> Linux Workqueue handler) s
5 494 M
( ------> KingCobra) s
5 472 M
(32. \(FEATURE - DONE\) EventNet kernel module service:) s
5 461 M
(VIRGO eventnet client \(telnet\) -------> VIRGO EventNet kernel service -----> EventNet graph te) s
5 450 M
(xt files) s
5 428 M
(33. \(FEATURE - DONE\) Related to point 22 - Reuse EventNet cloudwide logical time infinite grap) s
5 417 M
(h in AsFer in place of Logical clocks. At present the eventnet driver listens on port 20000 an) s
5 406 M
(d writes the edges and vertices files in kernel using vfs_read\(\)/vfs_write\(\). These text files) s
5 395 M
( can then be read by the AsFer code to generate DOT files and visualize the graph with graphvi) s
5 384 M
(z.) s
5 362 M
(34. \(FEATURE - OPTIONAL\) The kernel modules services listening on ports could return a JSON re) s
5 351 M
(sponse when connected instead of plaintext, conforming to REST protocol. Additional options fo) s
5 340 M
(r protocol buffers which are becoming a standard data interchange format.) s
5 318 M
(35. \(FEATURE-Minimum Functionality DONE\) Pointer Swizzling and Unswizzling of VIRGO addressspa) s
5 307 M
(ce pointers to/from VIRGO Unique ID \(VUID\). Presently VIRGO memory system calls implement a ba) s
5 296 M
(sic minimal pointer address translation to unique kmem location identifier.) s
5 274 M
(**********************************************************************************************) s
5 263 M
(********) s
5 252 M
(                                        CODE COMMIT RELATED NOTES) s
5 241 M
(**********************************************************************************************) s
5 230 M
(********) s
5 208 M
(VIRGO code commits as on 16/05/2013) s
5 197 M
(-----------------------------------) s
5 186 M
(1. VIRGO cloudexec driver with a listener kernel thread service has been implemented and it li) s
5 175 M
(stens on port 10000 on system startup) s
5 164 M
(through /etc/modules load-on-bootup facility) s
5 142 M
(2. VIRGO cloudexec virgo_clone\(\) system call has been implemented that would kernel_connect\(\) ) s
5 131 M
(to the VIRGO cloudexec service listening at) s
5 120 M
(port 10000) s
5 98 M
(3. VIRGO cloudexec driver has been split into virgo.h \(VIRGO typedefs\), virgocloudexecsvc.h\(VI) s
5 87 M
(RGO cloudexec service that is invoked by) s
5 76 M
(module_init\(\) of VIRGO cloudexec driver\) and virgo_cloudexec.c \(with module ops definitions\)) s
5 54 M
(4. VIRGO does not implement SUN RPC interface anymore and now has its own virgo ops.) s
5 32 M
(5. Lot of Kbuild related commits with commented lines for future use have been done viz., to i) s
5 21 M
(ntegrate VIRGO to Kbuild, KBUILD_EXTRA_SYMBOLS for cross-module symbol reference.) s
_R
S
%%Page: (10) 10
%%BeginPageSetup
_S
18 36 translate
/pagenum 10 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (10) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(VIRGO code commits as on 20/05/2013) s
5 681 M
(----------------------------------) s
5 670 M
(1. test_virgo_clone.c testcase for sys_virgo_clone\(\) system call works and connections are est) s
5 659 M
(ablished to VIRGO cloudexec kernel module.) s
5 637 M
(2. Makefile for test_virgo_clone.c and updated buildscript.sh for headers_install for custom-b) s
5 626 M
(uilt linux.) s
5 604 M
(VIRGO code commits as on 6/6/2013) s
5 593 M
(--------------------------------) s
5 582 M
(1. Message header related bug fixes) s
5 560 M
(VIRGO code commits as on 25/6/2013) s
5 549 M
(---------------------------------) s
5 538 M
(1.telnet to kernel service was tested and found working) s
5 527 M
(2.GFP_KERNEL changed to GFP_ATOMIC in VIRGO cloudexec kernel service) s
5 505 M
(VIRGO code commits as on 1/7/2013) s
5 494 M
(----------------------------------) s
5 483 M
(1. Instead of printing iovec, printing buffer correctly prints the messages) s
5 472 M
(2. wake_up_process\(\) added and function received from virgo_clone\(\) syscall is executed with k) s
5 461 M
(ernel_thread and results returned to) s
5 450 M
(virgo_clone\(\) syscall client.) s
5 417 M
(commit as on 03/07/2013) s
5 406 M
(-----------------------) s
5 395 M
(PRG loadbalancer preliminary code implemented. More work to be done) s
5 373 M
(commit as on 10/07/2013) s
5 362 M
(-----------------------) s
5 351 M
(Tested PRG loadbalancer read config code through telnet and virgo_clone. VFS code to read from) s
5 340 M
( virgo_cloud.conf commented for testing) s
5 318 M
(commits as on 12/07/2013) s
5 307 M
(------------------------) s
5 296 M
(PRG loadbalancer prototype has been completed and tested with test_virgo_clone and telnet and ) s
5 285 M
(symbol export errors and PRG errors have been fixed) s
5 263 M
(commits as on 16/07/2013) s
5 252 M
(-----------------------) s
5 241 M
(read_virgo_config\(\) and read_virgo_clone_config\(\)\(replica of read_virgo_config\(\)\) have been im) s
5 230 M
(plemented and tested to read the virgo_cloud.conf config parameters\(at present the virgo_cloud) s
5 219 M
(.conf has comma separated list of ip addresses. Port is hardcoded to 10000 for uniformity acro) s
5 208 M
(ss) s
5 197 M
(all nodes\). Thus minimal cloud functionality with config file  support is in place. Todo thing) s
5 186 M
(s include function pointer lookup in kernel service, more parameters to cloud config file if n) s
5 175 M
(eeded, individual configs for virgo_clone\(\) and virgo kernel service, kernel-to-userspace upca) s
5 164 M
(ll and execution instead of kernel space, performance tuning etc.,) s
5 142 M
(commits as on 17/07/2013) s
5 131 M
(------------------------) s
5 120 M
(moved read_virgo_config\(\) to VIRGOcloudexec's module_init so that config is read at boot time ) s
5 109 M
(and exported symbols are set beforehand.) s
5 98 M
(Also commented read_virgo_clone_config\(\) as it is redundant) s
5 76 M
(commits as on 23/07/2013) s
5 65 M
(------------------------) s
5 43 M
(Lack of reflection kind of facilities requires map of function_names to pointers_to_functions ) s
5 32 M
(to be executed) s
5 21 M
(on cloud has to be lookedup in the map to get pointer to function. This map is not scalable if) s
5 10 M
( number of functions are) s
_R
S
%%Page: (11) 11
%%BeginPageSetup
_S
18 36 translate
/pagenum 11 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (11) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(in millions and size of the map increases linearly. Also having it in memory is both CPU and m) s
5 681 M
(emory intensive.) s
5 670 M
(Moreover this map has to be synchronized in all nodes for coherency and consistency which is a) s
5 659 M
(nother intensive task.) s
5 648 M
(Thus name to pointer function table is at present not implemented. Suitable way to call a func) s
5 637 M
(tion by name of the function) s
5 626 M
(is yet to be found out and references in this topic are scarce.) s
5 604 M
(If parameterIsExecutable is set to 1 the data received from virgo_clone\(\) is not a function bu) s
5 593 M
(t name of executable) s
5 582 M
(This executable is then run on usermode using call_usermodehelper\(\) which internally takes car) s
5 571 M
(e of queueing the workstruct) s
5 560 M
(and executes the binary as child of keventd and reaps silently. Thus workqueue component of ke) s
5 549 M
(rnel is indirectly made use of.) s
5 538 M
(This is sometimes more flexible alternative that executes a binary itself on cloud and ) s
5 527 M
(is preferable to clone\(\)ing a function on cloud. Virgo_clone\(\) syscall client or telnet needs ) s
5 516 M
(to send the message with name of binary.) s
5 494 M
(If parameterIsExecutable is set to 0 then data received from virgo_clone\(\) is name of a functi) s
5 483 M
(on and is executed in else clause) s
5 472 M
(using dlsym\(\) lookup and pthread_create\(\) in user space. This unifies both call_usermodehelper) s
5 461 M
(\(\) and creating a userspace thread) s
5 450 M
(with a fixed binary which is same for any function. The dlsym lookup requires mangled function) s
5 439 M
( names which need to be sent by ) s
5 428 M
(virgo_clone or telnet. This is far more efficient than a function pointer table. ) s
5 417 M
(        ) s
5 406 M
(call_usermodehelper\(\) Kernel upcall to usermode to exec a fixed binary that would inturn execu) s
5 395 M
(te the cloneFunction in userspace) s
5 384 M
(by spawning a pthread. cloneFunction is name of the function and not binary. This clone functi) s
5 373 M
(on will be dlsym\(\)ed ) s
5 362 M
(and a pthread will be created by the fixed binary. Name of the fixed binary is hardcoded herei) s
5 351 M
(n as ) s
5 340 M
("virgo_kernelupcall_plugin". This fixed binary takes clone function as argument. For testing l) s
5 329 M
(ibvirgo.so has been created from) s
5 318 M
(virgo_cloud_test.c and separate build script to build the cloud function binaries has been add) s
5 307 M
(ed.) s
5 285 M
( - Ka.Shrinivaasan \(alias\) Shrinivas Kannan \(alias\) Srinivasan Kannan) s
5 274 M
(   \(https://sites.google.com/site/kuja27\)) s
5 252 M
(commits as on 24/07/2013) s
5 241 M
(------------------------) s
5 219 M
(test_virgo_clone unit test case updated with mangled function name to be sent to remote cloud ) s
5 208 M
(node. Tested with test_virgo_clone) s
5 197 M
(end-to-end and all features are working. But sometimes kernel_connect hangs randomly \(this was) s
5 186 M
( observed only today and looks similar) s
5 175 M
(to blocking vs non-blocking problem. Origin unknown\).) s
5 153 M
(- Ka.Shrinivaasan \(alias\) Shrinivas Kannan \(alias\) Srinivasan Kannan) s
5 142 M
(  \(https://sites.google.com/site/kuja27\)) s
5 120 M
(commits as on 29/07/2013) s
5 109 M
(------------------------) s
5 87 M
(Added kernel mode execution in the clone_func and created a sample kernel_thread for a cloud f) s
5 76 M
(unction. Some File IO logging added to upcall) s
5 65 M
(binaries and parameterIsExecutable has been moved to virgo.h) s
5 43 M
(commits as on 30/07/2013) s
5 32 M
(------------------------) s
5 21 M
(New usecase virgo_cloud_test_kernelspace.ko kernel module has been added. This exports a funct) s
5 10 M
(ion virgo_cloud_test_kernelspace\(\) and is ) s
_R
S
%%Page: (12) 12
%%BeginPageSetup
_S
18 36 translate
/pagenum 12 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (12) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(accessed by virgo_cloudexec kernel service to spawn a kernel thread that is executed in kernel) s
5 681 M
( addresspace. This Kernel mode execution) s
5 670 M
(on cloud adds a unique ability to VIRGO cloud platform to seamlessly integrate hardware device) s
5 659 M
(s on to cloud and transparently send commands) s
5 648 M
(to them from a remote cloud node through virgo_clone\(\).) s
5 626 M
(Thus above feature adds power to VIRGO cloud to make it act as a single "logical device driver) s
5 615 M
(" though devices are in geographically in a remote server.) s
5 593 M
(commits as on 01/08/2013 and 02/08/2013) s
5 582 M
(---------------------------------------) s
5 571 M
(Added Bash shell commandline with -c option for call_usermodehelper upcall clauses to pass in ) s
5 560 M
(remote virgo_clone command message as) s
5 549 M
(arguments to it. Also tried output redirection but it works some times that too with a fatal k) s
5 538 M
(ernel panic.) s
5 516 M
(Ideal solutions are :) s
5 505 M
(1. either to do a copy_from_user\(\) for message buffer from user address space \(or\)) s
5 494 M
(2. somehow rebuild the kernel with fd_install\(\) pointing stdout to a VFS file* struct. In olde) s
5 483 M
(r kernels like 2.6.x, there is an fd_install code) s
5 472 M
(with in kmod.c \(___call_usermodehelper\(\)\) which has been redesigned in kernel 3.x versions and) s
5 461 M
( fd_install has been removed in kmod.c .) s
5 450 M
(3. Create a Netlink socket listener in userspace and send message up from kernel Netlink socke) s
5 439 M
(t.) s
5 417 M
(All the above are quite intensive and time consuming to implement.Moreover doing FileIO in use) s
5 406 M
(rmode helper is strongly discouraged in kernel docs) s
5 384 M
(Since Objective of VIRGO is to virtualize the cloud as single execution "machine", doing an up) s
5 373 M
(call \(which would run with root abilities\) is) s
5 362 M
(redundant often and kernel mode execution is sufficient. Kernel mode execution with intermodul) s
5 351 M
(e function invocation can literally take over) s
5 340 M
(the entire board in remote machine \(since it can access PCI bus, RAM and all other device card) s
5 329 M
(s\)) s
5 307 M
(As a longterm design goal, VIRGO can be implemented as a separate protocol itself and sk_buff ) s
5 296 M
(packet payload from remote machine) s
5 285 M
(can be parsed by kernel service and kernel_thread can be created for the message.) s
5 263 M
(commits as on 05/08/2013:) s
5 252 M
(-------------------------) s
5 241 M
(Major commits done for kernel upcall usermode output logging with fd_install redirection to a ) s
5 230 M
(VFS file. With this it has become easy for user space to communicate runtime data to Kernel sp) s
5 219 M
(ace. Also a new strip_control_M\(\) function has been added to strip \\r\\n or " ". ) s
5 197 M
(11 August 2013:) s
5 186 M
(---------------) s
5 175 M
(Open Source Design and Academic Research Notes uploaded to http://sourceforge.net/projects/aca) s
5 164 M
(dpdrafts/files/MiscellaneousOpenSourceDesignAndAcademicResearchNotes_2013-08-11.pdf/download) s
5 131 M
(commits as on 23 August 2013) s
5 120 M
(----------------------------) s
5 109 M
(New Multithreading Feature added for VIRGO Kernel Service - action item 5 in ToDo list above \() s
5 98 M
(virgo_cloudexec driver module\). All dependent headers changed for kernel threadlocalizing glob) s
5 87 M
(al data.) s
5 65 M
(commits as on 1 September 2013) s
5 54 M
(------------------------------) s
5 43 M
(GNU Copyright license and Product Owner Profile \(for identity of license issuer\) have been com) s
5 32 M
(mitted. Also Virgo Memory Pooling - virgo_malloc\(\) related initial design notes \(handwritten s) s
5 21 M
(canned\) have been committed\(http://sourceforge.net/p/virgo-linux/code-0/HEAD/tree/trunk/virgo-) s
5 10 M
(docs/VIRGO_Memory_Pooling_virgomalloc_initial_design_notes.pdf\)) s
_R
S
%%Page: (13) 13
%%BeginPageSetup
_S
18 36 translate
/pagenum 13 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (13) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 681 M
(commits as on 14 September 2013) s
5 670 M
(-------------------------------) s
5 659 M
(Updated virgo malloc design handwritten nodes on kmalloc\(\) and malloc\(\) usage in kernelspace a) s
5 648 M
(nd userspace execution mode of virgo_cloudexec service \(http://sourceforge.net/p/virgo-linux/c) s
5 637 M
(ode-0/HEAD/tree/trunk/virgo-docs/VIRGO_Memory_Pooling_virgomalloc_design_notes_2_14September20) s
5 626 M
(13.pdf\). As described in handwritten notes, virgo_malloc\(\) and related system calls might be n) s
5 615 M
(eeded when a large scale allocation of kernel memory is needed when in kernel space execution ) s
5 604 M
(mode and large scale userspace memory when in user modes \(function and executable modes\). Thus) s
5 593 M
( a cloud memory pool both in user and kernel space is possible. ) s
5 571 M
(---------------------------------------) s
5 560 M
(VIRGO virtual addressing) s
5 549 M
(---------------------------------------) s
5 538 M
(VIRGO virtual address is defined with the following datatype:) s
5 516 M
(struct virgo_address) s
5 505 M
({) s
5 494 M
(        int node_id;) s
5 483 M
(        void* addr;) s
5 472 M
(};) s
5 450 M
(VIRGO address translation table is defined with following datatype:) s
5 428 M
(struct virgo_addr_transtable) s
5 417 M
({) s
5 406 M
(        int node_id;) s
5 395 M
(        void* addr;) s
5 384 M
(};) s
5 362 M
(------------------------------------------------) s
5 351 M
(VIRGO memory pooling prototypical implementation) s
5 340 M
(------------------------------------------------) s
5 329 M
(VIRGO memory pooling implementation as per the design notes committed as above is to be implem) s
5 318 M
(ented as a prototype under separate directory) s
5 307 M
(under drivers/virgo/memorypooling and $LINUX_SRC_ROOT/virgo_malloc. But the underlying code is) s
5 296 M
( more or less similar to drivers/virgo/cpupooling and $LINUX_SRC_ROOT/virgo_clone. ) s
5 274 M
(virgo_malloc\(\) and related syscalls and virgo mempool driver connect to and listen on port dif) s
5 263 M
(ferent from cpupooling driver. Though all these code can be within cpupooling itself, mempooli) s
5 252 M
(ng is implemented as separate driver and co-exists with cpupooling on bootup \(/etc/modules\). T) s
5 241 M
(his enables clear demarcation of functionalities for CPU and Memory virtualization.) s
5 219 M
(Commits as on 17 September 2013) s
5 208 M
(-------------------------------) s
5 197 M
(Initial untested prototype code - virgo_malloc and virgo mempool driver - for VIRGO Memory Poo) s
5 186 M
(ling has been committed - copied and modified from virgo_clone client and kernel driver servic) s
5 175 M
(e. ) s
5 153 M
(Commits as on 19 September 2013) s
5 142 M
(-------------------------------) s
5 131 M
(3.7.8 Kernel full build done and compilation errors in VIRGO malloc and mempool driver code an) s
5 120 M
(d more functions code added) s
5 98 M
(Commits as on 23 September 2013) s
5 87 M
(-------------------------------) s
5 76 M
(Updated virgo_malloc.c with two functions, int_to_str\(\) and addr_to_str\(\), using kmalloc\(\) wit) s
5 65 M
(h full kernel re-build.) s
5 54 M
(\(Rather a re-re-build because some source file updates in previous build got deleted somehow m) s
5 43 M
(ysteriously. This could be related to Cybercrime issues mentioned in https://sourceforge.net/p) s
5 32 M
(/usb-md/code-0/HEAD/tree/USBmd_notes.txt \)) s
5 10 M
(Commits as on 24 September 2013) s
_R
S
%%Page: (14) 14
%%BeginPageSetup
_S
18 36 translate
/pagenum 14 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (14) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(-------------------------------) s
5 681 M
(Updated syscall*.tbl files, staging.sh, Makefiles for virgo_malloc\(\),virgo_set\(\),virgo_get\(\) a) s
5 670 M
(nd virgo_free\(\) memory pooling syscalls. New testcase test_virgo_malloc for virgo_malloc\(\), vi) s
5 659 M
(rgo_set\(\), virgo_get\(\), virgo_free\(\) has been added to repository. This testcase might have to) s
5 648 M
( be updated if return type and args to virgo_malloc+ syscalls are to be changed.) s
5 626 M
(Commits as on 25 September 2013) s
5 615 M
(-------------------------------) s
5 604 M
(All build related errors fixed after kernel rebuild some changes made to function names to ref) s
5 593 M
(lect their) s
5 582 M
(names specific to memory pooling. Updated /etc/modules also has been committed to repository.) s
5 560 M
(Commits as on 26 September 2013) s
5 549 M
(-------------------------------) s
5 538 M
(Circular dependency error in standalone build of cpu pooling and memory pooling drivers fixed ) s
5 527 M
(and) s
5 516 M
(datatypes and declarations for CPU pooling and Memory Pooling drivers have been segregated int) s
5 505 M
(o respective header files \(virgo.h and) s
5 494 M
(virgo_mempool.h with corresponding service header files\) to avoid any dependency error.) s
5 472 M
(Commits as on 27 September 2013) s
5 461 M
(-------------------------------) s
5 450 M
(Major commits for Memory Pooling Driver listen port change and parsing VIRGO memory pooling co) s
5 439 M
(mmands have been done.) s
5 417 M
(Commits as on 30 September 2013) s
5 406 M
(-------------------------------) s
5 395 M
(New parser functions added for parameter parsing and initial testing on virgo_malloc\(\) works w) s
5 384 M
(ith telnet client with logs in test_logs/) s
5 362 M
(Commits as on 1 October 2013) s
5 351 M
(-----------------------------) s
5 340 M
(Removed strcpy in virgo_malloc as ongoing bugfix for buffer truncation in syscall path.) s
5 318 M
(Commits as on 7 October 2013) s
5 307 M
(----------------------------) s
5 296 M
(Fixed the buffer truncation error from virgo_malloc syscall to mempool driver service which wa) s
5 285 M
(s caused by) s
5 274 M
(sizeof\(\) for a char*. BUF_SIZE is now used for size in both syscall client and mempool kernel ) s
5 263 M
(service.) s
5 241 M
(Commits as on 9 October 2013 and 10 October 2013) s
5 230 M
(------------------------------------------------) s
5 219 M
(Mempool driver kernelspace virgo mempool ops have been rewritten due to lack of facilities to ) s
5 208 M
(return a) s
5 197 M
(value from kernel thread function. Since mempool service already spawns a kthread, this seems ) s
5 186 M
(to be sufficient. Also the iov.iov_len in virgo_malloc has been changed from BUF_SIZE to strle) s
5 175 M
(n\(buf\) since BUF_SIZE) s
5 164 M
(causes the kernel socket to block as it waits for more data to be sent.) s
5 142 M
(Commits as on 11 October 2013) s
5 131 M
(-----------------------------) s
5 120 M
(sscanf format error for virgo_cloud_malloc\(\) return pointer address and sock_release\(\) null po) s
5 109 M
(inter exception has been rectified.) s
5 98 M
(Added str_to_addr\(\) utility function.) s
5 76 M
(Commits as on 14 October 2013 and 15 October 2013) s
5 65 M
(-------------------------------------------------) s
5 54 M
(Updated todo list.) s
5 32 M
(Rewritten virgo_cloud_malloc\(\) syscall with:) s
5 21 M
(- mutexed virgo_cloud_malloc\(\) loop) s
5 10 M
(- redefined virgo address translation table in virgo_mempool.h) s
_R
S
%%Page: (15) 15
%%BeginPageSetup
_S
18 36 translate
/pagenum 15 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (15) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(- str_to_addr\(\): removed \(void**\) cast due to null sscanf though it should have worked) s
5 670 M
(Commits as on 18 October 2013) s
5 659 M
(------------------------------) s
5 648 M
(Continued debugging of null sscanf - added str_to_addr2\(\) which uses simple_strtoll\(\) kernel f) s
5 637 M
(unction) s
5 626 M
(for scanning pointer as long long from string and casting it to void*. Also more %p qualifiers) s
5 615 M
( where) s
5 604 M
(added in str_to_addr\(\) for debugging.) s
5 582 M
(Based on latest test_virgo_malloc run, simple_strtoll\(\) correctly parses the address string in) s
5 571 M
(to a long long base 16 and then is reinterpret_cast to void*. Logs in test/) s
5 549 M
(Commits as on 21 October 2013) s
5 538 M
(-----------------------------) s
5 527 M
(Kern.log for testing after vtranstable addr fix with simple_strtoll\(\) added to repository and ) s
5 516 M
(still the other %p qualifiers do not work and only simple_strtoll\(\) parses the address correct) s
5 505 M
(ly. ) s
5 483 M
(Commits as on 24 October 2013) s
5 472 M
(-----------------------------) s
5 461 M
(Lot of bugfixes made to virgo_malloc.c for scanning address into VIRGO transtable and size com) s
5 450 M
(putation. Testcase test_virgo_malloc.c has also been modified to do reinterpret cast of long l) s
5 439 M
(ong into \(struct virgo_address*\) and corresponding test logs have been added to repository und) s
5 428 M
(er virgo_malloc/test. ) s
5 406 M
(Though the above sys_virgo_malloc\(\) works, the return value is a kernel pointer if the virgo_m) s
5 395 M
(alloc executes in the Kernel mode which is more likely than User mode \(call_usermodehelper whi) s
5 384 M
(ch is circuitous\). Moreover copy_from_user\(\) or copy_to_user\(\) may not be directly useful here) s
5 373 M
( as this is an address allocation routine. The long long reinterpret cast obfuscates the virgo) s
5 362 M
(_address\(User or Kernel\) as a large integer which is a unique id for the allocated memory on c) s
5 351 M
(loud. Initial testing of sys_virgo_set\(\) causes a Kernel Panic as usual probably due to direct) s
5 340 M
( access of struct virgo_address*. Alternatives are to use only long long for allocation unique) s
5 329 M
(-id everywhere or do copy_to_user\(\) or copy_from_user\(\) of the address on a user supplied buff) s
5 318 M
(er. Also vtranstable can be made into a bucketed hash table that maps each alloc_id to a chain) s
5 307 M
(ed virgo malloc chunks than the present sequential addressing which is more similar to open ad) s
5 296 M
(dressing.) s
5 274 M
(Commits as on 25 October 2013) s
5 263 M
(----------------------------) s
5 252 M
(virgo_malloc.c has been rewritten by adding a userspace __user pointer to virgo_get\(\) and virg) s
5 241 M
(o_set\(\) syscalls which are internally copied with copy_from_user\(\) and copy_to_user\(\) kernel f) s
5 230 M
(unction to get and set userspace from kernelspace.Header file syscalls.h has been updated with) s
5 219 M
( changed syscalls prototypes.Two functions have been added to map a VIRGO address to a unique ) s
5 208 M
(virgo identifier and viceversa for abstracting hardware addresses from userspace as mentioned ) s
5 197 M
(in previous commit notes. VIRGO cloud mempool kernelspace driver has been updated to use virgo) s
5 186 M
(_mempool_args* instead of void* and VIRGO cloudexec mempool driverhas been updated accordingly) s
5 175 M
( during intermodule invocation.The virgo_malloc syscall client has been updated to modified si) s
5 164 M
(gnatures and return types for all mempool alloc,get,set,free syscalls.) s
5 142 M
(Commits as on 29 October 2013) s
5 131 M
(-----------------------------) s
5 120 M
(Miscellaneous ongoing bugfixes for virgo_set\(\) syscall error in copy_from_user\(\).) s
5 98 M
(Commits as on 2 November 2013) s
5 87 M
(-----------------------------) s
5 76 M
(Due to an issue which corrupts the kernel memory, presently telnet path to VIRGO mempool drive) s
5 65 M
(r has been) s
5 54 M
(tested after commits on 31 October 2013 and 1 November 2013 and is working but again there is ) s
5 43 M
(an issue in kstrtoul\(\) that returns the wrong address in virgo_cloud_mempool_kernelspace.ko th) s
5 32 M
(at gives the address for) s
5 21 M
(data to set. ) s
_R
S
%%Page: (16) 16
%%BeginPageSetup
_S
18 36 translate
/pagenum 16 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (16) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(Commits as on 6 November 2013) s
5 681 M
(-----------------------------) s
5 670 M
(New parser function virgo_parse_integer\(\) has been added to virgo_cloud_mempool_kernelspace dr) s
5 659 M
(iver module which is carried over from) s
5 648 M
(lib/kstrtox.c and modified locally to add an if clause to discard quotes and unquotes. With th) s
5 637 M
(is the telnet path commands for virgo_malloc\(\)) s
5 626 M
(and virgo_set\(\) are working. Today's kern.log has been added to repository in test_logs/.) s
5 604 M
(Commits as on 7 November 2013) s
5 593 M
(------------------------------) s
5 582 M
(In addition to virgo_malloc and virgo_set, virgo_get is also working through telnet path after) s
5 571 M
( today's commit for "virgodata:" prefix in virgo_cloud_mempool_kernelspace.ko. This prefix is ) s
5 560 M
(needed to differentiate data and address so that toAddressString\(\) can be invoked to sprintf\(\)) s
5 549 M
( the address in virgo_cloudexec_mempool.ko. Also mempool command parser has been updated to st) s
5 538 M
(rcmp\(\) virgo_cloud_get command also. ) s
5 516 M
(Commits as on 11 November 2013) s
5 505 M
(------------------------------) s
5 494 M
(More testing done on telnet path for virgo_malloc, virgo_set and virgo_get commands which work) s
5 483 M
( correctly. But there seem to be unrelated) s
5 472 M
(kmem_cache_trace_alloc panics that follow each successful virgo command execution. kern.log fo) s
5 461 M
(r this has been added to repository.) s
5 439 M
(Commits as on 22 November 2013) s
5 428 M
(------------------------------) s
5 417 M
(More testing done on telnet path for virgo_malloc,virgo_set and virgo_set after commenting ker) s
5 406 M
(nel socket shutdown code in the VIRGO cloudexec) s
5 395 M
(mempool sendto code. Kernel panics do not occur after commenting kernel socket shutdown.) s
5 373 M
(Commits as on 2 December 2013) s
5 362 M
(-----------------------------) s
5 351 M
(Lots of testing were done on telnet path and syscall path connection to VIRGO mempool driver a) s
5 340 M
(nd screenshots for working telnet path \(virgo_malloc, virgo_set and virgo_get\) have been commi) s
5 329 M
(tted to repository. Intriguingly, the syscall path is suddenly witnessing series of broken pip) s
5 318 M
(e erros, blocking errors etc., which are mostly Heisenbugs. ) s
5 296 M
(Commits as on 5 December 2013) s
5 285 M
(------------------------------) s
5 274 M
(More testing on system call path done for virgo_malloc\(\), virgo_set\(\) and virgo_get\(\) system c) s
5 263 M
(alls with test_virgo_malloc.c. All three syscalls work in syscall path after lot of bugfixes. ) s
5 252 M
(Kern.log that has logs for allocating memory in remote cloud node with virgo_malloc, sets data) s
5 241 M
( "test_virgo_malloc_data" with virgo_set and retrieves data with virgo_get.) s
5 208 M
(VIRGO version 12.0 tagged.) s
5 186 M
(Commits as on 12 March 2014) s
5 175 M
(---------------------------) s
5 164 M
(Initial VIRGO queueing driver implemented that flips between two internal queues: 1\) a native ) s
5 153 M
(queue implemented locally and 2\) wrapper around linux kernel's workqueue facility 3\) push_requ) s
5 142 M
(est\(\) modified to pass on the request data to the workqueue handler using container_of on a wr) s
5 131 M
(apper) s
5 120 M
(structure virgo_workqueue_request.) s
5 98 M
(Commits as on 20 March 2014) s
5 87 M
(---------------------------) s
5 76 M
(- VIRGO queue with additional boolean flags for its use as KingCobra queue) s
5 65 M
(- KingCobra kernel space driver that is invoked by the VIRGO workqueue handler) s
5 43 M
(Commits as on 30 March 2014) s
5 32 M
(----------------------------) s
5 21 M
(- VIRGO mempool driver has been augmented with use_as_kingcobra_service flags in CPU pooling a) s
5 10 M
(nd Memory pooling drivers) s
_R
S
%%Page: (17) 17
%%BeginPageSetup
_S
18 36 translate
/pagenum 17 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (17) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 681 M
(Commits as on 6 April 2014) s
5 670 M
(--------------------------) s
5 659 M
(- VIRGO mempool driver recvfrom\(\) function's if clause for KingCobra has been updated for REQU) s
5 648 M
(EST header formatting mentioned in KingCobra design notes) s
5 626 M
(Commits as on 7 April 2014) s
5 615 M
(--------------------------) s
5 604 M
(- generate_logical_timestamp\(\) function has been implemented in VIRGO mempool driver that gene) s
5 593 M
(rates timestamps based on 3 boolean flags. At present machine_timestamp is generated and prepe) s
5 582 M
(nded to the request to be pushed to VIRGO queue driver and then serviced by KingCobra.) s
5 560 M
(Commits as on 25 April 2014) s
5 549 M
(---------------------------) s
5 538 M
(- client ip address in VIRGO mempool recvfrom KingCobra if clause is converted to host byte or) s
5 527 M
(der from network byte order with ntohl\(\) ) s
5 505 M
(Commits as on 5 May 2014) s
5 494 M
(-------------------------) s
5 483 M
(- Telnet path commands for VIRGO cloud file system - virgo_cloud_open\(\), virgo_cloud_read\(\), v) s
5 472 M
(irgo_cloud_write\(\), virgo_cloud_close\(\) has been implemented and test logs have been added to ) s
5 461 M
(repository \(drivers/virgo/cloudfs/ and cloudfs/testlogs\) and kernel upcall path for paramIsExe) s
5 450 M
(cutable=0) s
5 428 M
(Commits as on 7 May 2014) s
5 417 M
(-------------------------) s
5 406 M
(- Bugfixes to tokenization in kernel upcall plugin with strsep\(\) for args passed on to the use) s
5 395 M
(rspace) s
5 373 M
(Commits as on 8 May 2014) s
5 362 M
(------------------------) s
5 351 M
(- Bugfixes to virgo_cloud_fs.c for kernel upcall \(parameterIsExecutable=0\) and with these the ) s
5 340 M
(kernel to userspace upcall and writing to a file in userspace \(virgofstest.txt\) works. Logs an) s
5 329 M
(d screenshots for this are added to repository in test_logs/) s
5 307 M
(Commits as on 6 June 2014) s
5 296 M
(-------------------------) s
5 285 M
(- VIRGO File System Calls Path implementation has been committed. Lots of Linux Full Build com) s
5 274 M
(pilation errors fixed and new integer parsing functionality added \(similar to driver modules\).) s
5 263 M
(  For the timebeing all syscalls invoke loadbalancer. This may be further optimized with a sti) s
5 252 M
(cky flag to remember the first invocation which might be usually virgo_open syscall to get the) s
5 241 M
( VFS descriptor that is used in subsequent syscalls.) s
5 219 M
(Commits as on 3 July 2014) s
5 208 M
(--------------------------) s
5 197 M
(- More testing and bugfixes for VIRGO File System syscalls have been done. virgo_write\(\) cause) s
5 186 M
(s kernel panic.) s
5 164 M
(7 July 2014 - virgo_write\(\) kernel panic notes:) s
5 153 M
(----------------------------------------------) s
5 142 M
(warning within http://lxr.free-electrons.com/source/arch/x86/kernel/smp.c#L121:) s
5 120 M
(static void native_smp_send_reschedule\(int cpu\)) s
5 109 M
({) s
5 98 M
(        if \(unlikely\(cpu_is_offline\(cpu\)\)\) {) s
5 87 M
(                WARN_ON\(1\);) s
5 76 M
(                return;) s
5 65 M
(        }) s
5 54 M
(        apic->send_IPI_mask\(cpumask_of\(cpu\), RESCHEDULE_VECTOR\);) s
5 43 M
(}) s
5 21 M
(This is probably a fixed kernel bug in <3.7.8 but recurring in 3.7.8:) s
5 10 M
(- http://lkml.iu.edu/hypermail/linux/kernel/1205.3/00653.html) s
_R
S
%%Page: (18) 18
%%BeginPageSetup
_S
18 36 translate
/pagenum 18 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (18) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(- http://www.kernelhub.org/?p=3&msg=74473&body_id=72338) s
5 681 M
(- http://lists.openwall.net/linux-kernel/2012/09/07/22) s
5 670 M
(- https://bugzilla.kernel.org/show_bug.cgi?id=54331) s
5 659 M
(- https://bbs.archlinux.org/viewtopic.php?id=156276) s
5 626 M
(Commits as on 29 July 2014) s
5 615 M
(---------------------------) s
5 604 M
(All VIRGO drivers\(cloudfs, queuing, cpupooling and memorypooling\) have been built on 3.15.5 ke) s
5 593 M
(rnel with some Makefile changes for ccflags and paths) s
5 571 M
(--------------------------------------------------------------------------------------) s
5 560 M
(Commits as on 17 August 2014) s
5 549 M
(--------------------------------------------------------------------------------------) s
5 538 M
(\(FEATURE - DONE\) VIRGO Kernel Modules and System Calls major rewrite for 3.15.5 kernel - 17 Au) s
5 527 M
(gust 2014) s
5 516 M
(--------------------------------------------------------------------------------------) s
5 505 M
(1. VIRGO config files have been split into /etc/virgo_client.conf and /etc/virgo_cloud.conf to) s
5 494 M
( delink the cloud client and kernel service) s
5 483 M
(config parameters reading and to do away with oft occurring symbol lookup errors and multiple ) s
5 472 M
(definition errors for num_cloud_nodes and) s
5 461 M
(node_ip_addrs_in_cloud - these errors are frequent in 3.15.5 kernel than 3.7.8 kernel. ) s
5 439 M
(2. Each VIRGO module and system call now reads the config file independent of others - there i) s
5 428 M
(s a read_virgo_config_<module>_<client_or_service>\(\) function variant for each driver and syst) s
5 417 M
(em call. Though at present smacks of a replicated code, in future the config reads for each co) s
5 406 M
(mponent \(system call or module\) might vary significantly depending on necessities.) s
5 384 M
(3. New kernel module config has been added in drivers/virgo. This is for future prospective us) s
5 373 M
(e as a config export driver that can) s
5 362 M
(be looked up by any other VIRGO module for config parameters.) s
5 340 M
(4. include/linux/virgo_config.h has the declarations for all the config variables declared wit) s
5 329 M
(hin each of the VIRGO kernel modules.) s
5 307 M
(5. Config variables in each driver and system call have been named with prefix and suffix to d) s
5 296 M
(ifferentiate the module and/or system call it serves.) s
5 274 M
(6. In geographically distributed cloud virgo_client.conf has to be in client nodes and virgo_c) s
5 263 M
(loud.conf has to be in cloud nodes. For VIRGO Queue - KingCobra REQUEST-REPLY peer-to-peer mes) s
5 252 M
(saging system same node can have virgo_client.conf and virgo_cloud.conf.) s
5 230 M
(7. Above segregation largely simplifies the build process as each module and system call is in) s
5 219 M
(dependently built without need for a symbol to be exported from other module by pre-loading it) s
5 208 M
(.) s
5 197 M
( ) s
5 186 M
(8. VIRGO File system driver and system calls have been tested with above changes and the virgo) s
5 175 M
(_open\(\),virgo_read\(\) and virgo_write\(\) calls work with much less crashes and freeze problems c) s
5 164 M
(ompared to 3.7.8 \(some crashes in VIRGO FS syscalls in 3.7.8 where already reported kernel bug) s
5 153 M
(s which seem to have been fixed in 3.15.5\). Today's kern.log test logs have been committed to ) s
5 142 M
(repository.) s
5 120 M
(---------------------------------------------) s
5 109 M
(Committed as on 23 August 2014) s
5 98 M
(---------------------------------------------) s
5 87 M
(Commenting use_as_kingcobra_service if clauses temporarily as disabling also doesnot work and ) s
5 76 M
(only commenting the block) s
5 65 M
(works for VIRGO syscall path. Quite weird as to how this relates to the problem. As this is a ) s
5 54 M
(heisenbug further testing is) s
5 43 M
(difficult and sufficient testing has been done with logs committed to repository. Probably a r) s
5 32 M
(untime symbol lookup for kingcobra) s
5 21 M
(causes the freeze.) s
5 10 M
(For forwarding messages to KingCobra and VIRGO queues, cpupooling driver is sufficient which a) s
_R
S
%%Page: (19) 19
%%BeginPageSetup
_S
18 36 translate
/pagenum 19 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (19) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(lso has the use_as_kingcobra_service clause.) s
5 670 M
(---------------------------------------------) s
5 659 M
(Committed as on 23 August 2014 and 24 August 2014) s
5 648 M
(---------------------------------------------) s
5 637 M
(As cpupooling driver has the same crash problem with kernel_accept\(\) when KingCobra has benn e) s
5 626 M
(nabled, KingCobra clauses have been commented in both cpupooling and memorypooling drivers. In) s
5 615 M
(stead queueing driver has been updated with a kernel service infrastructure to accept connecti) s
5 604 M
(ons at port 60000. With this following paths are available for KingCobra requests:) s
5 582 M
(        VIRGO cpupooling or memorypooling ====> VIRGO Queue =====> KingCobra) s
5 560 M
(                                        \(or\)) s
5 549 M
(        VIRGO Queue kernel service ===========================> KingCobra) s
5 527 M
(-----------------------------------------------) s
5 516 M
(Committed as on 26 August 2014) s
5 505 M
(-----------------------------------------------) s
5 494 M
(- all kmallocs have been made into GFP_ATOMIC instead of GFP_KERNEL) s
5 483 M
(- moved some kingcobra related header code before kernel_recvmsg\(\)) s
5 472 M
(- some header file changes for set_fs\(\)) s
5 450 M
(This code has been tested with modified code for KingCobra and the standalone) s
5 439 M
(kernel service that accepts requests from telnet directly at port 60000, pushes to virgo_queue) s
5 428 M
(and is handled to invoke KingCobra servicerequest kernelspace function, works) s
5 417 M
(\(the kernel_recvmsg\(\) crash was most probably due to Read-Only filesystem -errno printed is -3) s
5 406 M
(0\)) s
5 384 M
(---------------------------------------------------------------) s
5 373 M
(VIRGO version 14.9.9 has been release tagged on 9 September 2014) s
5 362 M
(---------------------------------------------------------------) s
5 340 M
(--------------------------------------------------------) s
5 329 M
(Committed as on 26 November 2014) s
5 318 M
(--------------------------------------------------------) s
5 307 M
(New kernel module cloudsync has been added to repository under drivers/virgo that can be used ) s
5 296 M
(for synchronization\(lock\(\) and unlock\(\)\) necessities in VIRGO cloud. Presently Bakery Algorith) s
5 285 M
(m has been implemented.) s
5 263 M
(--------------------------------------------------------) s
5 252 M
(Committed as on 27 November 2014) s
5 241 M
(--------------------------------------------------------) s
5 230 M
(virgo_bakery.h bakery_lock\(\) has been modified to take 2 parameters - thread_id and number of ) s
5 219 M
(for loops \(1 or 2\)) s
5 197 M
(--------------------------------------------------------) s
5 186 M
(Committed as on 2 December 2014) s
5 175 M
(--------------------------------------------------------) s
5 164 M
(VIRGO bakery algorithm implementation has been rewritten with some bugfixes. Sometimes there a) s
5 153 M
(re soft lockup errors due to looping in kernel time durations for which are kernel build confi) s
5 142 M
(gurable.) s
5 120 M
(--------------------------------------------------------------------) s
5 109 M
(Committed as on 17 December 2014) s
5 98 M
(--------------------------------------------------------------------) s
5 87 M
(Initial code commits for VIRGO EventNet kernel module service:) s
5 76 M
(--------------------------------------------------------------) s
5 65 M
(1.EventNet Kernel Service listens on port 20000) s
5 43 M
(2.It receives eventnet log messages from VIRGO cloud nodes and writes the log messages ) s
5 32 M
(after parsing into two text files /var/log/eventnet/EventNetEdges.txt and ) s
5 21 M
(/var/log/eventnet/EventNetVertices.txt by VFS calls) s
_R
S
%%Page: (20) 20
%%BeginPageSetup
_S
18 36 translate
/pagenum 20 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (20) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(3.These text files can then be processed by the EventNet implementations in AsFer \(python pygr) s
5 681 M
(aph and ) s
5 670 M
(C++ boost::graph based\)) s
5 648 M
(4.Two new directories virgo/utils and virgo/eventnet have been added.    ) s
5 626 M
(5.virgo/eventnet has the new VIRGO EventNet kernel module service implementation that listens ) s
5 615 M
(on ) s
5 604 M
(port 20000.) s
5 582 M
(6.virgo/utils is the new generic utilities driver that has a virgo_eventnet_log\(\) ) s
5 571 M
(exported function which connects to EventNet kernel service and sends the vertex and edge even) s
5 560 M
(tnet) s
5 549 M
(log messages which are parsed by kernel service and written to the two text files above.) s
5 527 M
(7.EventNet log messages have two formats:) s
5 516 M
(   - Edge message - "eventnet_edgemsg#<id>#<from_event>#<to_event>") s
5 505 M
(   - Vertex message - "eventnet_vertextmsg#<id>-<partakers csv>-<partaker conversations csv>") s
5 483 M
(8.The utilities driver Module.symvers have to be copied to any driver which are ) s
5 472 M
(then merged with the symbol files of the corresponding driver. Target clean has to be commente) s
5 461 M
(d while) s
5 450 M
(building the unified Module.symvers because it erases symvers carried over earlier.) s
5 428 M
(9.virgo/utils driver can be populated with all necessary utility exported functions that might) s
5 417 M
( be needed) s
5 406 M
(in other VIRGO drivers.) s
5 384 M
(10.Calls to virgo_eventnet_log\(\) have to be #ifdef guarded as this is quite network intensive.) s
5 362 M
(------------------------------------------------------------------) s
5 351 M
(Commits as on 18 December 2014) s
5 340 M
(------------------------------------------------------------------) s
5 329 M
(Miscellaneous bugfixes,logs and screenshot) s
5 307 M
(- virgo_cloudexec_eventnet.c - eventnet messages parser errors and eventnet_func bugs fixed) s
5 296 M
(- virgo_cloud_eventnet_kernelspace.c - filp_open\(\) args updated due to vfs_write\(\) kernel pani) s
5 285 M
(cs. The vertexmessage vfs_write is done after looping through the vertice textfile and appendi) s
5 274 M
(ng the conversation to the existing vertex.Some more code has to be added.) s
5 263 M
(- VIRGO EventNet build script updated for copying Module.symvers from utils driver for merging) s
5 252 M
( with eventnet Module.symvers during Kbuild) s
5 241 M
(- Other build generated sources and kernel objects) s
5 230 M
(- new testlogs directory with screenshot for edgemsg sent to EventNet kernel service and kern.) s
5 219 M
(log with previous history for vfs_write\(\) panics due to permissions and the logs for working f) s
5 208 M
(ilp_open\(\) fixed version) s
5 197 M
(- vertex message update ) s
5 175 M
(------------------------------------------------------------------) s
5 164 M
(Commits as on 2,3,4 January 2015) s
5 153 M
(------------------------------------------------------------------) s
5 142 M
(- fixes for virgo eventnet vertex and edge message text file vfs_write\(\) errors) s
5 131 M
(- kern.logs and screenshots) s
5 109 M
(------------------------------------------------------------------) s
5 98 M
(VIRGO version 15.1.8 release tagged on 8 January 2015) s
5 87 M
(------------------------------------------------------------------) s
5 65 M
(----------------------------------------------------------------------------------------------) s
5 54 M
(-----) s
5 43 M
(Commits as on 3 March 2015 - Initial commits for Kernel Analytics Module which reads the /etc/) s
5 32 M
(virgo_kernel_analytics.conf config \(and\) VIRGO memorypooling Key-Value Store Architecture Diag) s
5 21 M
(ram) s
5 10 M
(----------------------------------------------------------------------------------------------) s
_R
S
%%Page: (21) 21
%%BeginPageSetup
_S
18 36 translate
/pagenum 21 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (21) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(------) s
5 681 M
(- Architecture of Key-Value Store in memorypooling \(virgo_malloc,virgo_get,virgo_set,virgo_fre) s
5 670 M
(e\) has been) s
5 659 M
(uploaded as a diagram at http://sourceforge.net/p/virgo-linux/code-0/HEAD/tree/trunk/virgo-doc) s
5 648 M
(s/VIRGOLinuxKernel_KeyValueStore_and_Modules_Interaction.jpg) s
5 626 M
(- new kernel_analytics driver for AsFer <=> VIRGO+USBmd+KingCobra interface has been added.) s
5 615 M
(- virgo_kernel_analytics.conf having csv\(s\) of key-value pairs of analytics variables is set b) s
5 604 M
(y AsFer or any other Machine Learning code.  With this VIRGO Linux Kernel is endowed with abil) s
5 593 M
(ities to dynamically evolve than being just a platform for user code. Implications are huge - ) s
5 582 M
(for example, a config variable "MaxNetworkBandwidth=255" set by the ML miner in userspace base) s
5 571 M
(d on a Perceptron or Logistic Regression executed on network logs can be read by a kernel modu) s
5 560 M
(le that limits the network traffic to 255Mbps. Thus kernel dynamically changes behaviour. ) s
5 549 M
(- kernel_analytics Driver build script has been added) s
5 527 M
(--------------------------------------------------------------------------) s
5 516 M
(Commits as on 6 March 2015) s
5 505 M
(--------------------------------------------------------------------------) s
5 494 M
(- code has been added in VIRGO config module to import EXPORTed kernel_analytics config key-pa) s
5 483 M
(ir array) s
5 472 M
(set by Apache Spark \(mined from Uncomplicated Fire Wall logs\) and manually and write to kern.l) s
5 461 M
(og.) s
5 439 M
(--------------------------------------------------------------------------) s
5 428 M
(NeuronRain version 15.6.15 release tagged) s
5 417 M
(--------------------------------------------------------------------------) s
5 395 M
(--------------------------------------------------------------------------) s
5 384 M
(Portability to linux kernel 4.0.5) s
5 373 M
(--------------------------------------------------------------------------) s
5 362 M
(The VIRGO kernel module drivers are based on kernel 3.15.5. With kernel 4.0.5 kernel which is ) s
5 351 M
(the latest following ) s
5 340 M
(compilation and LD errors occur - this is on cloudfs VIRGO File System driver :) s
5 329 M
(- msghdr has to be user_msghdr for iov and iov_len as there is a segregation of msghdr) s
5 318 M
(- modules_install throws an error in scripts/Makefile.modinst while overwriting already instal) s
5 307 M
(led module) s
5 285 M
(-------------------------------------------------------------------------) s
5 274 M
(Commits as on 9 July 2015) s
5 263 M
(-------------------------------------------------------------------------) s
5 252 M
(VIRGO cpupooling driver has been ported to linux kernel 4.0.5 with msghdr changes as mentioned) s
5 241 M
( previously) s
5 230 M
(with kern.log for VIRGO cpupooling driver invoked in parameterIsExecutable=2 \(kernel module in) s
5 219 M
(vocation\)) s
5 208 M
(added in testlogs) s
5 186 M
(-------------------------------------------------------------------------) s
5 175 M
(Commits as on 10,11 July 2015) s
5 164 M
(-------------------------------------------------------------------------) s
5 153 M
(VIRGO Kernel Modules:) s
5 142 M
(- memorypooling) s
5 131 M
(- cloudfs) s
5 120 M
(- utils) s
5 109 M
(- config) s
5 98 M
(- kernel_analytics) s
5 87 M
(- cloudsync) s
5 76 M
(- eventnet) s
5 65 M
(- queuing ) s
5 54 M
(along with cpupooling have been ported to Linux Kernel 4.0.5 - Makefile and header files have ) s
5 43 M
(been) s
5 32 M
(updated wherever required.) s
5 10 M
(-------------------------------------------------------------------------) s
_R
S
%%Page: (22) 22
%%BeginPageSetup
_S
18 36 translate
/pagenum 22 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (22) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(Commits as on 20,21,22 July 2015) s
5 681 M
(-------------------------------------------------------------------------) s
5 670 M
(Due to SourceForge Storage Disaster\(http://sourceforge.net/blog/sourceforge-infrastructure-and) s
5 659 M
(-service-restoration/\),) s
5 648 M
(the github replica of VIRGO is urgently updated with some important changes for msg_iter,iovec) s
5 637 M
(etc., in 4.0.5 kernel port specifically for KingCobra and VIRGO Queueing. These have to be com) s
5 626 M
(mitted to SourceForge Krishna_iResearch) s
5 615 M
(repository at http://sourceforge.net/users/ka_shrinivaasan once SourceForge repos are restored) s
5 604 M
(.) s
5 593 M
(Time to move on to the manufacturing hub? GitHub ;-\)) s
5 582 M
(-------------------------------) s
5 571 M
(VIRGO Queueing Kernel Module Linux Kernel 4.0.5 port:) s
5 560 M
(-----------------------------------------------------) s
5 549 M
(- msg_iter is used instead of user_msghdr) s
5 538 M
(- kvec changed to iovec) s
5 527 M
(- Miscellaneous BUF_SIZE related changes) s
5 516 M
(- kern.logs for these have been added to testlogs) s
5 505 M
(- Module.symvers has been recreated with KingCobra Module.symvers from 4.0.5 KingCobra build) s
5 494 M
(- clean target commented in build script as it wipes out Module.symvers) s
5 483 M
(- updated .ko and .mod.c) s
5 472 M
(-------------------------------) s
5 461 M
(KingCobra Module Linux Kernel 4.0.5 port) s
5 450 M
(-----------------------------------------------------) s
5 439 M
(- vfs_write\(\) has a problem in 4.0.5) s
5 428 M
(- the filp_open\(\) args and flags which were working in 3.15.5 cause a) s
5 417 M
(kernel panic implicitly and nothing was written to logs) s
5 406 M
(- It took a very long time to figure out the reason to be vfs_write and filp_open) s
5 395 M
(- O_CREAT, O_RDWR and O_LARGEFILE cause the panic and only O_APPEND is working, but) s
5 384 M
(does not do vfs_write\(\). All other VIRGO Queue + KingCobra functionalities work viz.,) s
5 373 M
(enqueueing, workqueue handler invocation, dequeueing, invoking kingcobra kernelspace service) s
5 362 M
(request function from VIRGO queue handler, timestamp, timestamp and IP parser, reply_to_publis) s
5 351 M
(her etc.,) s
5 340 M
(- As mentioned in Greg Kroah Hartman's "Driving me nuts", persistence in Kernel space is) s
5 329 M
(a bad idea but still seems to be a necessary stuff - yet only vfs calls are used which have to) s
5 318 M
( be safe) s
5 307 M
(- Thus KingCobra has to be in-memory only in 4.0.5 if vfs_write\(\) doesn't work) s
5 296 M
(- Intriguingly cloudfs filesystems primitives - virgo_cloud_open, virgo_cloud_read, virgo_clou) s
5 285 M
(d_write etc.,) s
5 274 M
(work perfectly and append to a file.) s
5 263 M
(- kern.logs for these have been added to testlogs) s
5 252 M
(- Module.symvers has been recreated for 4.0.5) s
5 241 M
(- updated .ko and .mod.c) s
5 219 M
(----------------------------------------------------------------) s
5 208 M
(Due to SourceForge outage and for a future code diversification) s
5 197 M
(NeuronRain codebases \(AsFer, USBmd, VIRGO, KingCobra\) ) s
5 186 M
(in http://sourceforge.net/u/userid-769929/profile/ have been) s
5 175 M
(replicated in GitHub also - https://github.com/shrinivaasanka) s
5 164 M
(excluding some huge logs due to Large File Errors in GitHub.) s
5 153 M
(----------------------------------------------------------------) s
5 131 M
(---------------------------------------------------------------------) s
5 120 M
(Commits as on 30 July 2015) s
5 109 M
(---------------------------------------------------------------------) s
5 98 M
(VIRGO system calls have been ported to Linux Kernel 4.0.5 with commented gcc option -Wimplicit) s
5 87 M
(-function-declaration, ) s
5 76 M
(msghdr and iovec changes similar to drivers mentioned in previous commit notes above. But Kern) s
5 65 M
(el 4.1.3 has some Makefile and build issues.) s
5 54 M
(The NeuronRain codebases in SourceForge and GitHub would henceforth be mostly and always out-o) s
5 43 M
(f-sync and not guaranteed to be replicas - might get diversified into different research and d) s
5 32 M
(evelopment directions \(e.g one codebase might be more focussed on IoT while the other towards ) s
5 21 M
(enterprise bigdata analytics integration with kernel and training which is yet to be designed-) s
5 10 M
( depend on lot of constraints\)) s
_R
S
%%Page: (23) 23
%%BeginPageSetup
_S
18 36 translate
/pagenum 23 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (23) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 681 M
(---------------------------------------------------------------------) s
5 670 M
(Commits as on 2,3 August 2015) s
5 659 M
(---------------------------------------------------------------------) s
5 648 M
(- new .config file added which is created from menuconfig) s
5 637 M
(- drivers/Kconfig has been updated with 4.0.5 drivers/Kconfig for trace event linker errors) s
5 626 M
(Linux Kernel 4.0.5 - KConfig is drivers/ has been updated to resolve RAS driver trace event li) s
5 615 M
(nker error. RAS was not included in KConfig earlier.) s
5 604 M
(- link-vmlinux.sh has been replaced with 4.0.5 kernel version) s
5 582 M
(---------------------------------------------------------------------) s
5 571 M
(Commits as on 12 August 2015) s
5 560 M
(---------------------------------------------------------------------) s
5 549 M
(VIRGO Linux Kernel 4.1.5 port - related code changes - some important notes:) s
5 538 M
(---------------------------------------------------------------------) s
5 527 M
(- Linux Kernel 4.0.5 build suddenly had a serious root shell drop error in initramfs which was) s
5 516 M
( not resolved by:) s
5 505 M
(        - adding rootdelay in grub) s
5 494 M
(        - disabling uuid for block devices in grub config) s
5 483 M
(        - mounting in read/write mode in recovery mode) s
5 472 M
(        - no /dev/mapper related errors) s
5 461 M
(        - repeated exits in root shell) s
5 450 M
(        - delay before mount of root device in initrd scripts) s
5 439 M
(- mysteriously there were some firmware microcode bundle executions in ieucodetool) s
5 428 M
(- Above showed a serious grub corruption or /boot MBR bug or 4.0.5 VIRGO kernel build problem) s
5 417 M
(- Linux 4.0.x kernels are EOL-ed) s
5 406 M
(- Hence VIRGO is ported to 4.1.5 kernel released few days ago) s
5 395 M
(- Only minimum files have been changed as in commit log for Makefiles and syscall table and he) s
5 384 M
(aders and a build script has been added) s
5 373 M
(for 4.1.5:) s
5 362 M
(    Changed paths:) s
5 351 M
(    A buildscript_4.1.5.sh) s
5 340 M
(    M linux-kernel-extensions/Makefile) s
5 329 M
(    M linux-kernel-extensions/arch/x86/syscalls/Makefile) s
5 318 M
(    M linux-kernel-extensions/arch/x86/syscalls/syscall_32.tbl) s
5 307 M
(    M linux-kernel-extensions/drivers/Makefile) s
5 296 M
(    M linux-kernel-extensions/include/linux/syscalls.h) s
5 274 M
(- Above minimum changes were enough to build an overlay-ed Linux Kernel with VIRGO codebase) s
5 252 M
(---------------------------------------------------------------------) s
5 241 M
(Commits as on 14,15,16 August 2015) s
5 230 M
(---------------------------------------------------------------------) s
5 219 M
(Executed the minimum end-end telnet path primitives in Linux kernel 4.1.5 VIRGO code:) s
5 208 M
(- cpu virtualization) s
5 197 M
(- memory virtualization) s
5 186 M
(- filesystem virtualization \(updated filp_open flags\)) s
5 175 M
(and committed logs and screenshots for the above.) s
5 153 M
(---------------------------------------------------------------------) s
5 142 M
(Commits as on 17 August 2015) s
5 131 M
(---------------------------------------------------------------------) s
5 120 M
(VIRGO queue driver:) s
5 109 M
(- Rebuilt Module.symvers) s
5 98 M
(- kern.log for telnet request to VIRGO Queue + KingCobra queueing system in kernelspace) s
5 76 M
(---------------------------------------------------------------------) s
5 65 M
(Commits as on 25,26 September 2015) s
5 54 M
(---------------------------------------------------------------------) s
5 43 M
(VIRGO Linux Kernel 4.1.5 - memory system calls:) s
5 32 M
(----------------------------------------------) s
5 21 M
(- updated testcases and added logs for syscalls invoked separately\(malloc,set,get,free\)) s
5 10 M
(- The often observed unpredictable heisen kernel panics occur with 4.1.5 kernel too. The logs ) s
_R
S
%%Page: (24) 24
%%BeginPageSetup
_S
18 36 translate
/pagenum 24 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (24) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(are 2.3G and) s
5 681 M
(only grepped output is committed to repository.) s
5 670 M
(- virgo_malloc.c has been updated with kstrdup\(\) to copy the buf to iov.iov_base which was ear) s
5 659 M
(lier) s
5 648 M
(crashing in copy_from_iter\(\) within tcp code. This problem did not happen in 3.15.5 kernel.) s
5 637 M
(- But virgo_clone syscall code works without any changes to iov_base as above which does a str) s
5 626 M
(cpy\(\)) s
5 615 M
( which is an internal memcpy\(\) though. So what causes this crash in memory system calls alone) s
5 604 M
(is a mystery.) s
5 593 M
(- new insmod script has been added to load the VIRGO memory modules as necessary instead of at) s
5 582 M
( boot time.) s
5 571 M
(- test_virgo_malloc.c and its Makefile has been updated.) s
5 549 M
(VIRGO Linux Kernel 4.1.5 - filesystem calls- testcases and logs:) s
5 538 M
(---------------------------------------------------------------) s
5 527 M
(  - added insmod script for VIRGO filesystem drivers) s
5 516 M
(  - test_virgo_filesystem.c has been updated for syscall numbers in 4.1.5 VIRGO kernel) s
5 505 M
(  - virgo_fs.c syscalls code has been updated for iov.iov_base kstrdup\(\) - without this there ) s
5 494 M
(are kernel panics in copy_from_iter\(\). kern.log) s
5 483 M
(testlogs have been added, but there are heisen kernel panics. The virgo syscalls are executed ) s
5 472 M
(but not written to kern.log due to these crashes.) s
5 461 M
(Thus execution logs are missing for VIRGO filesystem syscalls.) s
5 439 M
(----------------------------------------------------------------------) s
5 428 M
(Commits as on 28,29 September 2015) s
5 417 M
(----------------------------------------------------------------------) s
5 395 M
(VIRGO Linux Kernel 4.1.5 filesystem syscalls:) s
5 384 M
(--------------------------------------------) s
5 373 M
(- Rewrote iov_base code with a separate iovbuf set to iov_base and strcpy\(\)-ing the syscall co) s
5 362 M
(mmand to iov_base similar to VIRGO) s
5 351 M
(memory syscalls) s
5 340 M
(- Pleasantly the same iovbuf code that crashes in memory syscalls works for VIRGO FS without c) s
5 329 M
(rash.Thus both virgo_clone and virgo_filesystem) s
5 318 M
(syscalls work without issues in 4.1.5 and virgo_malloc\(\) works erratically in 4.1.5 which rema) s
5 307 M
(ins as issue.) s
5 296 M
(- kern.log for VIRGO FS syscalls and virgofstest text file written by virgo_write\(\) have been ) s
5 285 M
(added to repository) s
5 252 M
(VIRGO Linux 4.1.5 kernel memory syscalls:) s
5 241 M
(-----------------------------------) s
5 230 M
(- rewrote the iov_base buffer code for all VIRGO memory syscalls by allocating separate iovbuf) s
5 219 M
( and copying the message to it - this just replicates the virgo_clone syscall behaviour which ) s
5 208 M
(works without any crashes mysteriously.) s
5 197 M
(- did extensive repetitive tests that were frequented by numerous kernel panics and crashes) s
5 186 M
(- The stability of syscalls code with 3.15.5 kernel appears to be completely absent in 4.1.5) s
5 175 M
(- The telnet path works relatively better though) s
5 164 M
(- Difference between virgo_clone and virgo_malloc syscalls despite having same kernel sockets ) s
5 153 M
(code looks like a non-trivial bug and a kernel stability issue.) s
5 142 M
(- kernel OOPS traces are quite erratic.) s
5 131 M
(- Makefile path in testcase has been updated) s
5 109 M
(----------------------------------------------------------------------) s
5 98 M
(Commits as on 4 October 2015) s
5 87 M
(----------------------------------------------------------------------) s
5 76 M
(VIRGO Linux Kernel 4.1.5 - Memory System Calls:) s
5 65 M
(-----------------------------------------------) s
5 54 M
(- replaced copy_to_user\(\) with a memcpy\(\)) s
5 43 M
(- updated the testcase with an example VUID hardcoded.) s
5 32 M
(- str_to_addr2\(\) is done on iov_base instead of buf which was causing NULL parsing) s
5 21 M
(- kern.log with above resolutions and multiple VIRGO memory syscalls tests - malloc,get,set) s
5 10 M
(- With above VIRGO malloc and set syscalls work relatively causing less number of random kerne) s
_R
S
%%Page: (25) 25
%%BeginPageSetup
_S
18 36 translate
/pagenum 25 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (25) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(l panics) s
5 681 M
(- return values of memory calls set to 0) s
5 670 M
(- in virgo_get\(\) syscall, memcpy\(\) of iov_base is done to data_out userspace pointer) s
5 659 M
(- kern.log with working logs for syscalls - virgo_malloc\(\), virgo_set\(\), virgo_get\(\) but still) s
5 648 M
( there are random kernel panics) s
5 637 M
(- Abridged kern.log for VIRGO Memory System Calls with 4.1.5 Kernel - shows example logs for v) s
5 626 M
(irgo_malloc\(\), virgo_set\(\) and virgo_get\(\)) s
5 604 M
(----------------------------------------------------------------) s
5 593 M
(Commits as on 14 October 2015) s
5 582 M
(----------------------------------------------------------------) s
5 571 M
(VIRGO Queue Workqueue handler usermode clause has been updated with 4.1.5 kernel paths and kin) s
5 560 M
(gcobra in user mode is enabled for invoking KingCobra Cloud Perfect Forwarding.) s
5 538 M
(---------------------------------------------------------------) s
5 527 M
(Commits as on 15 October 2015) s
5 516 M
(---------------------------------------------------------------) s
5 505 M
(- Updated VIRGO Queue kernel binaries and build generated sources) s
5 494 M
(- virgo_queue.h has been modified for call_usermodehelper\(\) - set_ds\(\) and fd_install\(\) have b) s
5 483 M
(een uncommented for output redirection. Output redirection works but there are "alloc_fd: slot) s
5 472 M
( 1 not NULL!" errors at random \(kern.log in kingcobra testlogs\) which seems to be a new featur) s
5 461 M
(e in 4.1.5 kernel. This did not happen in 3.7.8-3.15.5 kernels) s
5 439 M
(-----------------------------------------------------------------) s
5 428 M
(Commits as on 3 November 2015) s
5 417 M
(-----------------------------------------------------------------) s
5 406 M
(- kern.log for VIRGO kernel_analytics+config drivers which export the analytics variables from) s
5 395 M
( /etc/virgo_kernel_analytics.conf kernel-wide and print them in config driver has been added t) s
5 384 M
(o config/testlogs) s
5 362 M
(-----------------------------------------------------------------) s
5 351 M
(Commits as on 10 January 2016) s
5 340 M
(-----------------------------------------------------------------) s
5 329 M
(NeuronRain VIRGO enterprise version 2016.1.10 released.) s
5 307 M
(-----------------------------------------------------------------------------------) s
5 296 M
(NeuronRain - AsFer commits for VIRGO - C++ and C Python extensions) s
5 285 M
(- Commits as on 29 January 2016) s
5 274 M
(-----------------------------------------------------------------------------------) s
5 263 M
(----------------------------------------------------------------------------------------------) s
5 252 M
(--------------) s
5 241 M
(\(FEATURE - DONE\)  Python-C++-VIRGOKernel and Python-C-VIRGOKernel boost::python and cpython im) s
5 230 M
(plementations:) s
5 219 M
(----------------------------------------------------------------------------------------------) s
5 208 M
(-------------) s
5 197 M
(- It is a known idiom that Linux Kernel and C++ are not compatible.) s
5 186 M
(- In this commit an important feature to invoke VIRGO Linux Kernel from userspace python libra) s
5 175 M
(ries via two alternatives have been added.) s
5 164 M
(- In one alternative, C++ boost::python extensions have been added to encapsulate access to VI) s
5 153 M
(RGO memory system calls - virgo_malloc\(\), virgo_set\(\), virgo_get\(\), virgo_free\(\). Initial test) s
5 142 M
(ing reveals that C++ and Kernel are not too incompatible and all the VIRGO memory system calls) s
5 131 M
( work well though initially there were some errors because of config issues.) s
5 120 M
(- In the other alternative, C Python extensions have been added that replicate boost::python e) s
5 109 M
(xtensions above in C - C Python with Linux kernel) s
5 98 M
(works exceedingly well compared to boost::python.) s
5 87 M
(- This functionality is required when there is a need to set kernel analytics configuration va) s
5 76 M
(riables learnt by AsFer Machine Learning Code) s
5 65 M
(dynamically without re-reading /etc/virgo_kernel_analytics.conf.) s
5 54 M
(- This completes a major integration step of NeuronRain suite - request travel roundtrip to-an) s
5 43 M
(d-fro top level machine-learning C++/python) s
5 32 M
(code and rock-bottom C linux kernel - bull tamed ;-\).) s
5 21 M
(- This kind of python access to device drivers is available for Graphics Drivers already on li) s
5 10 M
(nux \(GPIO - for accessing device states\)) s
_R
S
%%Page: (26) 26
%%BeginPageSetup
_S
18 36 translate
/pagenum 26 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (26) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(- logs for both C++ and C paths have been added in cpp_boost_python_extensions/ and cpython_ex) s
5 681 M
(tensions.) s
5 670 M
(- top level python scripts to access VIRGO kernel system calls have been added in both directo) s
5 659 M
(ries:) s
5 648 M
(        CPython - python cpython_extensions/asferpythonextensions.py) s
5 637 M
(        C++ Boost::Python - python cpp_boost_python_extensions/asferpythonextensions.py) s
5 626 M
(- .so, .o files with build commandlines\(asferpythonextensions.build.out\) for "python setup.py ) s
5 615 M
(build" have been added) s
5 604 M
(in build lib and temp directories.) s
5 593 M
(- main implementations for C++ and C are in cpp_boost_python_extensions/asferpythonextensions.) s
5 582 M
(cpp and cpython_extensions/asferpythonextensions.c) s
5 560 M
(-----------------------------------------------------------------------------------------) s
5 549 M
(Commits as on 12 February 2016) s
5 538 M
(-----------------------------------------------------------------------------------------) s
5 527 M
(Commits for Telnet/System Call Interface to VIRGO CPUPooling -> VIRGO Queue -> KingCobra) s
5 516 M
(-----------------------------------------------------------------------------------------) s
5 505 M
(*\) This was commented earlier for the past few years due to a serious kernel panic in previous) s
5 494 M
( kernel versions - <= 3.15.5) s
5 483 M
(*\) In 4.1.5 a deadlock between VIRGO CPUPooling and VIRGO queue driver init was causing follow) s
5 472 M
(ing error in "use_as_kingcobra_service" clause :) s
5 461 M
(        - "gave up waiting for virgo_queue init, unknown symbol push_request\(\)") s
5 450 M
(*\) To address this a new boolean flag to selectively enable and disable VIRGO Queue kernel ser) s
5 439 M
(vice mode "virgo_queue_reactor_service_mode" has been added.) s
5 428 M
(*\) With this flag VIRGO Queue is both a kernel service driver and a standalone exporter of fun) s
5 417 M
(ction symbols - push_request/pop_request) s
5 406 M
(*\) Incoming request data from telnet/virgo_clone\(\) system call into cpupooling kernel service ) s
5 395 M
(reactor pattern \(virgo cpupooling listener loop\) is treated as generic string and handed over ) s
5 384 M
(to VIRGO queue and KingCobra which publishes it.) s
5 373 M
(*\) This resolves a long standing deadlock above between VIRGO cpupooling "use_as_kingcobra_ser) s
5 362 M
(vice" clause and VIRGO queue init.) s
5 351 M
(*\) This makes virgo_clone\(\) systemcall/telnet both synchronous and asynchronous - requests fro) s
5 340 M
(m telnet client/virgo_clone\(\) system call can be either synchronous RPC functions executed on ) s
5 329 M
(a remote cloud node in kernelspace \(or\) an asynchronous invocation through "use_as_kingcobra_s) s
5 318 M
(ervice" clause path to VIRGO Queue driver which enqueues the data in kernel workqueue and subs) s
5 307 M
(equently popped by KingCobra.) s
5 296 M
(*\) Above saves an additional code implementation for virgo_queue syscall paths - virgo_clone\(\)) s
5 285 M
( handles, based on config selected, incoming data passed to it either as a remote procedure ca) s
5 274 M
(ll or as a data that is pushed to VIRGO Queue/KingCobra pub-sub kernelspace.) s
5 263 M
(-----------------------------------------------------------------------------------------) s
5 252 M
(Prerequisites:) s
5 241 M
(--------------) s
5 230 M
(- insmod kingcobra_main_kernelspace.ko) s
5 219 M
(- insmod virgo_queue.ko compiled with flag virgo_queue_reactor_service_mode=1) s
5 208 M
(        \(when virgo_queue_reactor_service_mode=0, listens on port 60000 for direct telnet requ) s
5 197 M
(ests\)) s
5 186 M
(- insmod virgo_cloud_test_kernelspace.ko) s
5 175 M
(- insmod virgo_cloudexec.ko \(listens on port 10000\)) s
5 153 M
(-----------------------------------------------------------------------------------------) s
5 142 M
(Schematic Diagram) s
5 131 M
(-----------------------------------------------------------------------------------------) s
5 120 M
(VIRGO clone system call/telnet client ---> VIRGO cpupooling\(compiled with use_as_kingcobra_ser) s
5 109 M
(vice=1\) ------> VIRGO Queue kernel service \(compiled with virgo_queue_reactor_service_mode=1\) ) s
5 98 M
(---> Linux Workqueue handler ------> KingCobra) s
5 76 M
(-----------------------------------------------------------------------------------------) s
5 65 M
(Commits as on 15 February 2016 - Kernel Analytics - VIRGO Linux Kernelwide imports) s
5 54 M
(-----------------------------------------------------------------------------------------) s
5 43 M
(- Imported Kernel Analytics variables into CloudFS kernel module - printed in driver init\(\)) s
5 32 M
(- Module.symvers from kernel_analytics has been merged with CloudFS Module.symvers) s
5 21 M
(- Logs for above has been added in cloudfs/test_logs/) s
5 10 M
(- Makefile updated with correct fs path) s
_R
S
%%Page: (27) 27
%%BeginPageSetup
_S
18 36 translate
/pagenum 27 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (27) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(- Copyleft notices updated) s
5 670 M
(-----------------------------------------------------------------------------------------) s
5 659 M
(Commits as on 15 February 2016 - Kernel Analytics - VIRGO Linux Kernelwide imports) s
5 648 M
(-----------------------------------------------------------------------------------------) s
5 637 M
(- Kernel Analytics driver exported variables have been imported in CPU virtualization driver) s
5 626 M
(- Module.symvers from kernel_analytics has been merged with Module.symvers in cpupooling) s
5 615 M
(- kern.log for this import added to cpupooling/virgocloudexec/test_logs/) s
5 593 M
(-----------------------------------------------------------------------------------------) s
5 582 M
(Commits as on 15 February 2016 - Kernel Analytics - VIRGO Linux Kernelwide imports) s
5 571 M
(-----------------------------------------------------------------------------------------) s
5 560 M
(- Imported kernel analytics variables into memory virtualization driver init\(\) , exported from) s
5 549 M
( kernel_analytics driver) s
5 538 M
(- build shell script updated) s
5 527 M
(- logs added to test_logs/) s
5 516 M
(- Module.symvers from kernel_analytics has been merged with memory driver Module.symvers) s
5 505 M
(- Makefile updated) s
5 483 M
(-----------------------------------------------------------------------------------------) s
5 472 M
(Commits as on 15 February 2016 - Kernel Analytics - VIRGO Linux Kernelwide imports) s
5 461 M
(-----------------------------------------------------------------------------------------) s
5 450 M
(- Imported kernel analytics variables into VIRGO Queueing Driver) s
5 439 M
(- logs for this added in test_logs/) s
5 428 M
(- Makefile updated) s
5 417 M
(- Module.symvers from kernel_analytics has been merged with Queueing driver's Module.symvers) s
5 406 M
(- .ko, .o and build generated sources) s
5 384 M
(-------------------------------------------------------------------------------) s
5 373 M
(Commits as on 16,17 February 2016) s
5 362 M
(-------------------------------------------------------------------------------) s
5 351 M
(\(FEATURE-DONE\) Socket Buffer Debug Utility Function - uses linux skbuff facility) s
5 340 M
(-------------------------------------------------------------------------------) s
5 329 M
(- In this commit a multipurpose socket buffer debug utility function has been added in utils d) s
5 318 M
(river and exported kernelwide.) s
5 307 M
(- It takes a socket as function argument does the following:) s
5 296 M
(        - dereference the socket buffer head of skbuff per-socket transmit data queue) s
5 285 M
(        - allocate skbuff with alloc_skb\(\)) s
5 274 M
(        - reserve head room with skb_reserve\(\)) s
5 263 M
(        - get a pointer to data payload with skb_put\(\)) s
5 252 M
(        - memcpy\(\) an example const char* to skbuff data) s
5 241 M
(        - Iterate through the linked list of skbuff queue in socket and print headroom and dat) s
5 230 M
(a pointers) s
5 219 M
(        - This can be used as a packet sniffer anywhere within VIRGO linux network stack) s
5 208 M
(- Any skb_*\(\) functions can be plugged-in here as deemed necessary.) s
5 197 M
(- kern.log\(s\) which print the socket internal skbuff data have been added to a new testlogs/ d) s
5 186 M
(irectory) s
5 175 M
(- .cmd files generated by kbuild) s
5 153 M
(--------------------------------------------------------------------------------) s
5 142 M
(\(FEATURE-DONE\) Commits as on 24 February 2016) s
5 131 M
(--------------------------------------------------------------------------------) s
5 120 M
(skbuff debug function in utils/ driver:) s
5 109 M
(\(*\) Added an if clause to check NULLity of skbuff headroom before doing skb_alloc\(\)) s
5 98 M
(\(*\) kern.log for this commit has been added testlogs/) s
5 87 M
(\(*\) Rebuilt kernel objects and sources) s
5 65 M
(--------------------------------------------------------------------------------) s
5 54 M
(Commits as on 29 February 2016) s
5 43 M
(--------------------------------------------------------------------------------) s
5 32 M
(-------------------------------------------------------------------------------------) s
5 21 M
(\(FEATURE-DONE\) Software Analytics - SATURN Program Analysis added to VIRGO Linux kernel driver) s
5 10 M
(s) s
_R
S
%%Page: (28) 28
%%BeginPageSetup
_S
18 36 translate
/pagenum 28 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (28) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(-------------------------------------------------------------------------------------) s
5 681 M
(- SATURN \(saturn.stanford.edu\) Program Analysis and Verification software has been) s
5 670 M
(integrated into VIRGO Kernel as a Verification+SoftwareAnalytics subsystem) s
5 659 M
(- A sample driver that can invoke an exported function has been added in drivers - saturn_prog) s
5 648 M
(ram_analysis) s
5 637 M
(- Detailed document for an example null pointer analysis usecase has been created in virgo-doc) s
5 626 M
(s/VIRGO_SATURN_Program_Analysis_Integration.txt) s
5 615 M
(- linux-kernel-extensions/drivers/virgo/saturn_program_analysis/saturn_program_analysis_trees/) s
5 604 M
(error.txt is the error report from SATURN) s
5 593 M
(- SATURN generated preproc and trees are in linux-kernel-extensions/drivers/virgo/saturn_progr) s
5 582 M
(am_analysis/preproc and) s
5 571 M
(linux-kernel-extensions/drivers/virgo/saturn_program_analysis/saturn_program_analysis_trees/) s
5 549 M
(--------------------------------------------------------------------------------) s
5 538 M
(Commits as on 10 March 2016) s
5 527 M
(--------------------------------------------------------------------------------) s
5 516 M
(- SATURN analysis databases \(.db\) for locking, memory and CFG analysis.) s
5 505 M
(- DOT and PNG files for locking, memory and CFG analysis.) s
5 494 M
(- new folder saturn_calypso_files/ has been added in saturn_program_analysis/ with new .clp fi) s
5 483 M
(les virgosaturncfg.clp and virgosaturnmemory.clp) s
5 472 M
(- SATURN alias analysis .db files) s
5 450 M
(----------------------------------------------------------------------------------------------) s
5 439 M
(---------------------------------------------) s
5 428 M
(\(FEATURE-DONE\) NEURONRAIN - ASFER Commits for VIRGO - CloudFS systems calls integrated into Bo) s
5 417 M
(ost::Python C++ and Python CAPI invocations) s
5 406 M
(----------------------------------------------------------------------------------------------) s
5 395 M
(---------------------------------------------) s
5 384 M
(----------------------------------------------------------------------------------------------) s
5 373 M
(----------------------------) s
5 362 M
(AsFer Commits as on 30 May 2016) s
5 351 M
(----------------------------------------------------------------------------------------------) s
5 340 M
(----------------------------) s
5 329 M
(VIRGO CloudFS system calls have been added \(invoked by unique number from syscall_32.tbl\) for ) s
5 318 M
(C++ Boost::Python interface to) s
5 307 M
(VIRGO Linux System Calls. Switch clause with a boolean flag has been introduced to select eith) s
5 296 M
(er VIRGO memory or filesystem calls.) s
5 285 M
(kern.log and CloudFS textfile Logs for VIRGO memory and filesystem invocations from AsFer pyth) s
5 274 M
(on have been committed to testlogs/) s
5 252 M
(----------------------------------------------------------------------------------------------) s
5 241 M
(----------------------------) s
5 230 M
(AsFer Commits as on 31 May 2016) s
5 219 M
(----------------------------------------------------------------------------------------------) s
5 208 M
(----------------------------) s
5 197 M
(Python CAPI interface to NEURONRAIN VIRGO Linux System Calls has been updated to include File ) s
5 186 M
(System open, read, write primitives also.) s
5 175 M
(Rebuilt extension binaries, kern.logs and example appended text file have been committed to te) s
5 164 M
(stlogs/. This is exactly similar to) s
5 153 M
(commits done for Boost::Python C++ interface. Switch clause has been added to select memory or) s
5 142 M
( filesystem VIRGO syscalls.) s
5 120 M
(----------------------------------------------------------------------------------------------) s
5 109 M
(--------------------------) s
5 98 M
(\(BUG - STABILITY ISSUES\) Commits - 25 July 2016 - Static Analysis of VIRGO Linux kernel for in) s
5 87 M
(vestigating heisencrashes) s
5 76 M
(----------------------------------------------------------------------------------------------) s
5 65 M
(--------------------------) s
5 54 M
(Initial Documentation for Smatch and Coccinelle kernel static analyzers executed on VIRGO Linu) s
5 43 M
(x kernel - to be updated) s
5 32 M
(periodically with further analysis.) s
5 10 M
(----------------------------------------------------------------------------------------------) s
_R
S
%%Page: (29) 29
%%BeginPageSetup
_S
18 36 translate
/pagenum 29 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (29) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(-------------------------------) s
5 681 M
(\(BUG - STABILITY ISSUES\) Commits - 1 August 2016 - VIRGO Linux Stability Issues - Ongoing Rand) s
5 670 M
(om oops and panics investigation) s
5 659 M
(----------------------------------------------------------------------------------------------) s
5 648 M
(-------------------------------) s
5 637 M
(1. GFP_KERNEL has been replaced with GFP_ATOMIC flags in kmem allocations.) s
5 626 M
(2. NULL checks have been introduced in lot of places involving strcpy, strcat, strcmp etc., to) s
5 615 M
( circumvent) s
5 604 M
(buffer overflows.) s
5 593 M
(3. Though this has stabilized the driver to some extent, still there are OOPS in unrelated pla) s
5 582 M
(ces deep) s
5 571 M
(with in kernel where paging datastructures are accessed - kmalloc somehow corrupts paging) s
5 560 M
(4. OOPS are debugged via gdb as:) s
5 549 M
(        4.1 gdb ./vmlinux /proc/kcore) s
5 538 M
(        or) s
5 527 M
(        4.2 gdb <loadable_kernel_module>.o) s
5 516 M
(   followed by) s
5 505 M
(        4.3 l *\(address+offset in OOPS dump\)) s
5 494 M
(5. kern.log\(s\) for the above have been committed in tar.gz format and have numerous OOPS occur) s
5 483 M
(red during repetitive telnet and syscall) s
5 472 M
(invocation\(boost::python C++\) invocations of virgo memory system calls.) s
5 461 M
(6. Paging related OOPS look like an offshoot of set_fs\(\) encompassing the filp_open VFS calls.) s
5 439 M
(----------------------------------------------------------------------------------------------) s
5 428 M
(--) s
5 417 M
(\(BUG-STABILITY ISSUES\) Commits - 26 September 2016 - Ongoing Random Panic investigation) s
5 406 M
(----------------------------------------------------------------------------------------------) s
5 395 M
(--) s
5 384 M
(Further analysis on direct VIRGO memory cache primitives telnet invocation - problems are simi) s
5 373 M
(lar) s
5 362 M
(to Boost::Python AsFer VIRGO system calls invocations.) s
5 340 M
(----------------------------------------------------------------------------------------------) s
5 329 M
(--) s
5 318 M
(\(BUG-STABILITY ISSUES\) Commits - 27 September 2016 - Ongoing Random Panic investigation) s
5 307 M
(----------------------------------------------------------------------------------------------) s
5 296 M
(--) s
5 285 M
(Analysis of VIRGO memory cache primitives reveal more inconsistencies in cacheline flushes bet) s
5 274 M
(ween CPU and GPU.) s
5 252 M
(----------------------------------------------------------------------------------------------) s
5 241 M
(-----) s
5 230 M
(Commits - 20 March 2017 and 21 March 2017 - VIRGO Linux 64-bit build based on 4.10.3 kernel) s
5 219 M
(----------------------------------------------------------------------------------------------) s
5 208 M
(-----) s
5 197 M
(*\) moved virgoeventnetclient_driver_build.sh to virgoutils_driver_build.sh in utils/ driver) s
5 186 M
(*\) Updated VIRGO Linux Build Steps for 4.10.3) s
5 175 M
(*\) New repository has been created for 64-bit VIRGO Linux kernel based on 4.10.3 mainline kern) s
5 164 M
(el in GitHub and imported in SourceForge:) s
5 153 M
(        https://github.com/shrinivaasanka/virgo64-linux-github-code) s
5 142 M
(        https://sourceforge.net/p/virgo64-linux/) s
5 131 M
(*\) Though it could have been branched off from existing VIRGO repository \(32-bit\) which is bas) s
5 120 M
(ed on 4.1.5 mainline kernel, creating a) s
5 109 M
(separate repository for 64-bit 4.10.3 VIRGO kernel code was simpler because:) s
5 98 M
(        - there have been directory path changes for syscall entries in 4.10.3 and some other ) s
5 87 M
(KBuild entities) s
5 76 M
(        - Some script changes done for 4.1.5 in modpost and vmlinux phases are not required) s
5 65 M
(        - having two VIRGO branches one with 4.1.5 code and 32-bit driver .ko binaries and oth) s
5 54 M
(er with 4.10.3 code and 64-bit driver .ko) s
5 43 M
(binaries could be unmanageable and commits could go into wrong branch) s
5 32 M
(        - 4.10.3 64-bit VIRGO kernel build is still in experimental phase and it is not known ) s
5 21 M
(if 64-bit 4.10.3 build solves earlier panic) s
5 10 M
(problems in 4.1.5) s
_R
S
%%Page: (30) 30
%%BeginPageSetup
_S
18 36 translate
/pagenum 30 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (30) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(        - If necessary one of these two repositories could be made branch of the other later) s
5 670 M
(----------------------------------------------------------------------------------------------) s
5 659 M
(--------) s
5 648 M
(Commits - 27 March 2017 Ongoing analysis of VIRGO 64 bit linux kernel based on 4.10.3 kernel m) s
5 637 M
(ainline) s
5 626 M
(----------------------------------------------------------------------------------------------) s
5 615 M
(--------) s
5 604 M
(*\) Prima facie, 64 bit kernel is quite finicky and importunate compared to 32 bit and 64 bit s) s
5 593 M
(pecific idiosyncrasies are to the fore.) s
5 582 M
(*\) During the past 1 week, quite a few variants of kernel and drivers builds were tried with K) s
5 571 M
(ASAN enabled and without KASAN \(Google Kernel Address Sanitizer\)) s
5 560 M
(*\) KASAN shows quite huge number of user memory accesses which later translate to panics.) s
5 549 M
(*\) Most nagging of these was kernel_recvmsg\(\) panic.) s
5 538 M
(*\) Added and updated skbuff socket debug utility driver with a new debug function and to print) s
5 527 M
( more fields of skbuff) s
5 516 M
(*\) KASAN was complaining about _asan_load8 \(loading 8 userspace bytes\)) s
5 505 M
(*\) All erroneous return data types in VIRGO mempool ops structure have been corrected in VIRGO) s
5 494 M
( headers) s
5 483 M
(*\) all type casts have been sanitized) s
5 472 M
(*\) Changed all kernel stack allocations to kernel heap kzallocs) s
5 461 M
(*\) This later caused a crash in inet_sendmsg in kernel_sendmsg\(\)) s
5 450 M
(*\) gdb64 disassemble showed a trapping instruction:) s
5 439 M
(testb $0x6,0x91\(%14\) with corresponding source line:) s
5 428 M
(sg = !!\(sk->sk_route_caps & NETIF_F_SG\)) s
5 417 M
(in tcp_sendmsg\(\) \(net/ipv4/tcp.c\)) s
5 406 M
(*\) changed kernel_sendmsg\(\) to sock->ops->sendmsg\(\)) s
5 395 M
(*\) These commits are still ongoing analysis only.) s
5 384 M
(*\) Screenshots for these have been added to debug-info/) s
5 362 M
(----------------------------------------------------------------------------------------------) s
5 351 M
(---------------------------------) s
5 340 M
(Continued analysis of VIRGO 64-bit linux kernel built on 4.10.3 mainline - Commits - 30 March ) s
5 329 M
(2017) s
5 318 M
(----------------------------------------------------------------------------------------------) s
5 307 M
(---------------------------------) s
5 296 M
(*\) Previous commit was crashing inside tcp_sendmsg\(\)) s
5 285 M
(*\) GDB64 disassembly shows NULL values for register R12 which is added with an offset 91 and i) s
5 274 M
(s an operand in testb) s
5 263 M
(*\) Protected all kernel_sendmsg\(\) and kernel_recvmsg\(\) in both system calls side and drivers s) s
5 252 M
(ide with) s
5 241 M
(        oldfs=get_fs\(\), set_ds\(KERNEL_DS\) and set_fs\(oldfs\)) s
5 230 M
(blocks without which there are random kernel_sendmsg and kernel_recvmsg hangs) s
5 219 M
(*\) Removed init_net and sock_create_kern usage everywhere and replaced them with sock_create c) s
5 208 M
(alls) s
5 197 M
(*\) Tried MSG_FASTOPEN flags but it does not help much in resolving tcp_sendmsg\(\) NULL pointer ) s
5 186 M
(dereference issue. MSG_FASTOPEN just) s
5 175 M
(speedsup the message delivery by piggybacking the message payload before complete handshake is) s
5 164 M
( established\(SYN, SYN-ACK, SYN-ACK-ACK\) in) s
5 153 M
(SYN-ACK itself. But eventually it has to be enabled as fast open is becoming a standard.) s
5 142 M
(*\) Kasan reports have been enabled.) s
5 131 M
(*\) Added more debug code in skbuff debug utility functions in utils driver to check if sk->pro) s
5 120 M
(t is a problem.) s
5 109 M
(*\) Replaced kernel_sendmsg with a sock->ops->sendmsg\(\) in mempool sendto function which otherw) s
5 98 M
(ise crashes in tcp_sendmsg\(\).) s
5 87 M
(*\) With sock->ops->sendmsg\(\) systemcalls <-----> drivers two-way request-reply works but still) s
5 76 M
( there are random -32 \(broken pipe\) and -104) s
5 65 M
(\(Connection Reset by Peer\) errors) s
5 54 M
(*\) Logs for working sys_virgo_malloc\(\) call with correctly returned VIRGO Unique ID for memory) s
5 43 M
( allocated has been committed to test_logs in) s
5 32 M
(virgocloudexecmempool) s
5 21 M
(*\) sock->ops->sendmsg\(\) in mempool driver sendto function requires a MSG_NOSIGNAL flag which p) s
5 10 M
(revents SIGPIPE signal though not fully) s
_R
S
%%Page: (31) 31
%%BeginPageSetup
_S
18 36 translate
/pagenum 31 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (31) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(*\) Reason for random broken pipe and connection reset by peer errors in mempool sendto is unkn) s
5 681 M
(own. Both sides have connections open and) s
5 670 M
(there is no noticeable traffic.) s
5 659 M
(*\) While socket communications in 32 bit VIRGO kernel syscalls and drivers work with no issues) s
5 648 M
(, why 64-bit has so many hurdles is puzzling.) s
5 637 M
(Reasons could be 64 bit address alignment issues, 64 bit specific #ifdefs in kernel code flow,) s
5 626 M
( major changes from 4.1.5 to 4.10.3 kernels etc.,) s
5 615 M
(*\) NULL values for register R12 indicate already freed skbuff data which are accessed/double-f) s
5 604 M
(reed. Kernel TCP engine has a circular linked list of skbuff write queue which is iterated in ) s
5 593 M
(skbuff utils driver debug functions.) s
5 582 M
(*\) TCP engine clones the head data of skbuff queue, transmits it and waits for an ACK or timeo) s
5 571 M
(ut. Data is freed only if ACK or timeout occurs.) s
5 560 M
(And head of the queue is advanced to next element in write queue and this continues till write) s
5 549 M
( queue is empty waiting for more messages.) s
5 538 M
(*\) If ACK is not received, head data is cloned again and retransmitted by sequence number flow) s
5 527 M
( control.) s
5 505 M
(----------------------------------------------------------------------------------------------) s
5 494 M
(---------) s
5 483 M
(Continued Analysis of VIRGO 64 bit based on 4.10.3 linux kernel - Commits - 1 April 2017, 3 Ap) s
5 472 M
(ril 2017) s
5 461 M
(----------------------------------------------------------------------------------------------) s
5 450 M
(---------) s
5 439 M
(*\) kernel_sendmsg\(\) has been replaced with sock->ops->sendmsg\(\) because) s
5 428 M
(kernel_sendmsg\(\) is quite erratic in 4.10.3 64 bit) s
5 417 M
(*\) There were connection reset errors in system calls side for virgo_malloc/. This was probabl) s
5 406 M
(y because) s
5 395 M
(sock->ops->sendmsg\(\) requires MSG_DONTWAIT and MSG_NOSIGNAL flags and sendmsg does not block.) s
5 384 M
(*\) sock release happens and virgo_malloc syscalls receives -104 error) s
5 373 M
(*\) Temporarily sock_release has been commented. Rather socket timeout should be relied upon wh) s
5 362 M
(ich should) s
5 351 M
(do automatic release of socket resources) s
5 340 M
(*\) Similar flags have been applied in virgo_malloc syscalls too.) s
5 329 M
(*\) Logs with above changes do not have reset errors as earlier.) s
5 318 M
(*\) virgo set/get still crashes because 64 bit id is truncated which would require data type ch) s
5 307 M
(anges for) s
5 296 M
(64 bit) s
5 285 M
(*\) test_virgo_malloc test case has been rebuilt with -m64 flag for invocation of 64 bit syscal) s
5 274 M
(ls by) s
5 263 M
(numeric ids) s
5 241 M
(----------------------------------------------------------------------------------------------) s
5 230 M
(------------) s
5 219 M
(Continued Analysis of VIRGO 64 bit 4.10.3 kernel - commits - 10 April 2017) s
5 208 M
(----------------------------------------------------------------------------------------------) s
5 197 M
(------------) s
5 186 M
(*\) There is something seriously wrong with 4.10.3 kernel sockets in 64 bit build VIRGO send/re) s
5 175 M
(cv messages and even accept/listen too.) s
5 164 M
(*\) All kernel socket functionalities which work well in 4.1.5 32 bit VIRGO , have random hangs) s
5 153 M
(, panics in 4.10.3 VIRGO64 build mostly) s
5 142 M
(in inet_recvmsg/sendmsg code path) s
5 131 M
(*\) KASAN shows attempts to access user address which occurs despite set_fs\(KERNEL_DS\)) s
5 120 M
(*\) Crash stack is similar to previous crashes in tcp_sendmsg\(\) ) s
5 109 M
(*\) Tried different address and protocol families for kernel socket accept \(TCP,UDP,RAW sockets) s
5 98 M
(\)) s
5 87 M
(*\) With Datagram sockets, kernel_listen\(\) mysteriously fails with -95 error in kernel_bind\(ope) s
5 76 M
(ration not supported\)) s
5 65 M
(*\) With RAW sockets, kernel_listen\(\) fails with -93 error for AF_PACKET \(protocol not supporte) s
5 54 M
(d\)) s
5 43 M
(*\) tcpdump pcap sniffer doesn't show anything unruly.) s
5 32 M
(*\) This could either be a problem with kernel build \(unlikely\), Kbuild .config or could have e) s
5 21 M
(xtraneous reasons. But .config for) s
5 10 M
(4.1.5 and 4.10.3 are similar. ) s
_R
S
%%Page: (32) 32
%%BeginPageSetup
_S
18 36 translate
/pagenum 32 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (32) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(*\) Only major difference between 4.10.3 and 4.1.5 is init_net added in sock_create_kern\(\) inte) s
5 681 M
(rnally) s
5 670 M
(*\) datatype of VIRGO Unique ID has been changed to unsigned long long \(_u64\) ) s
5 659 M
(*\) tried with INADDR_LOOPBACK in place of INADDR_ANY ) s
5 648 M
(*\) also tried with disabled multi\(homing\) in /etc/hosts.conf) s
5 637 M
(*\) Above random kernel socket hangs occur across all VIRGO system calls and drivers transport.) s
5 626 M
( ) s
5 615 M
(*\) Utils kernel socket client to EventNet kernel service also has similar inet_recvmsg/inet_se) s
5 604 M
(ndmsg panic problems.) s
5 582 M
(----------------------------------------------------------------------------------------------) s
5 571 M
(-----------------) s
5 560 M
(Commits - 11 April 2017 - EventNet and Utils Drivers 64bit) s
5 549 M
(----------------------------------------------------------------------------------------------) s
5 538 M
(-----------------) s
5 527 M
(*\) EventNet driver works in 64 bit VIRGO Linux) s
5 516 M
(*\) An example eventnet logging with utils virgo_eventnet_log\(\) works now without tcp_sendmsg\(\)) s
5 505 M
( related stalls in previous builds) s
5 494 M
(*\) Return Datatypes for all EventNet operations have been sanitized \(struct socket* was return) s
5 483 M
(ed as int in 32 build and reinterpret-cast to) s
5 472 M
(struct socket*. This reinterpret cast does not work in 64 bit\) in eventnet header.) s
5 461 M
(*\) utils eventnet log in init\(\) has been updated with a meaningful edge update message) s
5 450 M
(*\) kern.log for this has been added to eventnet/testlogs) s
5 428 M
(----------------------------------------------------------------------------------------------) s
5 417 M
(---------------------) s
5 406 M
(Commits - 17 April 2017 - VIRGO64 Memory, CPU, FileSystem, EventNet kernel module drivers ) s
5 395 M
(----------------------------------------------------------------------------------------------) s
5 384 M
(---------------------) s
5 373 M
(*\) telnet requests to VIRGO memory\(kernelmemcache\), cpu and filesystem modules work after reso) s
5 362 M
(lving issues with return value types) s
5 351 M
(*\) commented le32_to_cpu\(\) and print_buffer\(\) which was suppressing lot of log messages.) s
5 340 M
(*\) VIRGO <driver> ops structures have been updated with correct datatypes.) s
5 329 M
(*\) reinterpret cast of struct socket* to int has been completely done away with which could ha) s
5 318 M
(ve caused 64bit specific panics) s
5 307 M
(*\) lot of kern.log\(s\) and screen captures have been added for telnet requests in testlogs/ of ) s
5 296 M
(respective <driver> directory) s
5 285 M
(*\) Prima facie 64bit telnet requests to VIRGO module listeners are relatively stabler than 32b) s
5 274 M
(it ) s
5 263 M
(*\) Previous code changes should be relevant to 32 bit VIRGO kernel too.) s
5 252 M
(*\) tcp_sendmsg\(\)/tcp_recvmsg\(\) related hangs could be mostly related to corrupted skbuff queue) s
5 241 M
( within each socket.) s
5 230 M
(*\) This is because replacing kernel_<send/recv>msg\(\) with sock_<send/recv>msg\(\) causes return ) s
5 219 M
(value to be 0 while) s
5 208 M
(socket release crashes within skbuff related kernel functions.) s
5 197 M
(*\) To make socket state immutable, in VIRGO memory driver header files, client socket has been) s
5 186 M
( declared as const type.) s
5 164 M
(----------------------------------------------------------------------------------------------) s
5 153 M
(-----------------) s
5 142 M
(Commits - KingCobra 64 bit and VIRGO Queue + KingCobra telnet requests - 17 April 2017) s
5 131 M
(----------------------------------------------------------------------------------------------) s
5 120 M
(-----------------) s
5 109 M
(*\) Rebuilt KingCobra 64bit kernel module) s
5 98 M
(*\) telnet requests to VIRGO64 Queueing module listener driver are serviced by KingCobra servic) s
5 87 M
(erequest) s
5 76 M
(*\) Request_Reply queue persisted for this VIRGO Queue + KingCobra routing has been committed t) s
5 65 M
(o c-src/testlogs.) s
5 54 M
(*\) kern.log for this routing has been committed in VIRGO64 queueing directory) s
5 43 M
(*\) Similar to other drivers struct socket* reinterpret cast to int has been removed and has be) s
5 32 M
(en made const in queuesvc kernel thread) s
5 10 M
(----------------------------------------------------------------------------------------------) s
_R
S
%%Page: (33) 33
%%BeginPageSetup
_S
18 36 translate
/pagenum 33 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (33) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(----------------) s
5 681 M
(Commits - VIRGO64 system calls - kernel module listeners - testcases and system calls updates ) s
5 670 M
(- 18 April 2017) s
5 659 M
(----------------------------------------------------------------------------------------------) s
5 648 M
(----------------) s
5 637 M
(*\) All testcases have been rebuilt) s
5 626 M
(*\) VIRGO kernel memcache,cpu and filesystem system calls have been updated with set_fs\(\)/get_f) s
5 615 M
(s\(\) blocks for kernel_sendmsg\(\)) s
5 604 M
(and kernel_recvmsg\(\)) s
5 593 M
(*\) Of these virgo_clone\(\) system call testcase \(test_virgo_clone\) works flawlessly and there a) s
5 582 M
(re no tcp_sendmsg\(\)/tcp_recvmsg\(\) related) s
5 571 M
(kernel panics.) s
5 560 M
(*\) VIRGO memcache and filesystem system call testcases have usual tcp_sendmsg\(\)/tcp_recvmsg\(\) ) s
5 549 M
(despite the kernel socket code) s
5 538 M
(being similar to VIRGO clone system call) s
5 527 M
(*\) Logs for VIRGO clone system call to CPU kernel driver module have been committed to virgo_c) s
5 516 M
(lone/test/testlogs) s
5 494 M
(----------------------------------------------------------------------------------------------) s
5 483 M
(-------------------------------) s
5 472 M
(Commits - VIRGO64 Kernel MemCache and FileSystem system calls to VIRGO Memory and FileSystem D) s
5 461 M
(rivers - 19 April 2017) s
5 450 M
(----------------------------------------------------------------------------------------------) s
5 439 M
(-------------------------------) s
5 428 M
(*\) Changed iovec in virgo_clone.c to kvec) s
5 417 M
(*\) test_virgo_filesystem.c and test_virgo_malloc.c VIRGO system calls testcases have been chan) s
5 406 M
(ged with some additional printf\(s\) in userspace) s
5 395 M
(*\) virgo_malloc.c has been updated with BUF_SIZE in iov_len and memset to zero initialize the ) s
5 384 M
(buffer. tcp_sendmsg\(\)/tcp_recvmsg\(\) pair were) s
5 373 M
(getting stuck in copy_from_iter_full\(\) memcpy with a NULL Dereference. memcpy\(\) was reading pa) s
5 362 M
(st the buffer bound causing an overrun. strlen\(\)) s
5 351 M
(didnot work for iov_len.) s
5 340 M
(*\) virgo_fs.c virgo_write\(\) memcpy has been changed back to copy_from_user\(\) thereby restoring) s
5 329 M
( status quo ante \(commented more than 3 years ago) s
5 318 M
(because of a kernel panic in older versions of 32 bit VIRGO kernel\)) s
5 307 M
(*\) Logs for VIRGO kmemcache and filesystem system calls have been committed to respective syst) s
5 296 M
(em call directories.) s
5 285 M
(*\) With this all VIRGO64 functionalities work in both telnet and system calls requests routes ) s
5 274 M
(end-to-end from clients to kernel modules with) s
5 263 M
(kernel sockets issues resolved fully.) s
5 252 M
(*\) Major findings are:) s
5 241 M
(- VIRGO 4.10.3 64 bit kernel is very much stable compared to 32 bit 4.1.5 kernel) s
5 230 M
(- there are no i915 related errors which happened in VIRGO 32 bit 4.1.5 kernel) s
5 219 M
(- Repetitive telnet and system calls requests to VIRGO modules are stable and there are no ker) s
5 208 M
(nel panics like 4.1.5 32 bit kernel.) s
5 197 M
(- Google Kernel Address Sanitizer is quite helpful in finding stack overruns, null derefs, use) s
5 186 M
(r memory accesses etc.,) s
5 175 M
(- 64 bit kernel is visibly faster than 32 bit.) s
5 164 M
(- Virgo Unique ID is now extended to 2^64 with unsigned long long.) s
5 142 M
(----------------------------------------------------------------------------------------------) s
5 131 M
(---------------------------) s
5 120 M
(Commits - VIRGO64 memory and filesystem calls to memory and filesystem drivers requests routin) s
5 109 M
(g - 20 April 2017) s
5 98 M
(----------------------------------------------------------------------------------------------) s
5 87 M
(---------------------------) s
5 76 M
(*\) Changed return value of virgo_cloud_free_kernelspace\(\) to a string literal "kernel memory f) s
5 65 M
(reed") s
5 54 M
(*\) Logs for VIRGO64 memory and filesystem calls to memory and filesystem drivers requests rout) s
5 43 M
(ing have been committed in test_logs of) s
5 32 M
(both driver directories) s
5 10 M
(----------------------------------------------------------------------------------------------) s
_R
S
%%Page: (34) 34
%%BeginPageSetup
_S
18 36 translate
/pagenum 34 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (34) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(---) s
5 681 M
(Commits - 27 April 2017) s
5 670 M
(----------------------------------------------------------------------------------------------) s
5 659 M
(---) s
5 648 M
(Residual logs for VIRGO 64 bit 4.10.3 kernel committed.) s
5 626 M
(----------------------------------------------------------------------------------------------) s
5 615 M
(---) s
5 604 M
(Commits - 25 May 2017) s
5 593 M
(----------------------------------------------------------------------------------------------) s
5 582 M
(---) s
5 571 M
(*\) Changed LOOPBACK to INADDR_ANY for VIRGO64 kernel memcache listen port) s
5 560 M
(*\) All VIRGO64 RPC, kernel memcache, cloud filesystem primitives have been retested) s
5 549 M
(*\) VIRGO64 mempool binaries have been rebuilt) s
5 527 M
(----------------------------------------------------------------------------------------------) s
5 516 M
(-----) s
5 505 M
(Commits - 31 August 2017 - NeuronRain ReadTheDocs Documentation - VIRGO64 System calls and Dri) s
5 494 M
(vers) s
5 483 M
(\(http://neuronrain-documentation.readthedocs.io/en/latest/\)) s
5 472 M
(----------------------------------------------------------------------------------------------) s
5 461 M
(-----) s
5 450 M
(\(*\) New directory systemcalls_drivers/ has been added to virgo-docs/ and representative VIRGO6) s
5 439 M
(4) s
5 428 M
(system calls and drivers functionality logs have been committed for demonstration purpose.) s
5 417 M
(\(*\) VIRGO64 cloudfs driver has been rebuilt after changing virgofstest.txt file creation filp_) s
5 406 M
(open\(\) call) s
5 395 M
(\(*\) Screenshots and logs for VIRGO64 Clone, Kernel MemCache and Cloud FS SystemCalls-Drivers i) s
5 384 M
(nteraction, socket transport debug messages and Kernel Address Sanitizer have been committed i) s
5 373 M
(n virgo-docs/systemcalls_drivers) s
5 351 M
(----------------------------------------------------------------------------------------------) s
5 340 M
(-----------------------------------------) s
5 329 M
(Commits - 23 September 2017 - Major VIRGO mainline kernel version Upgrade for Kernel Transport) s
5 318 M
( Layer Security - 4.10.3 to 4.13.3) s
5 307 M
(----------------------------------------------------------------------------------------------) s
5 296 M
(-----------------------------------------) s
5 285 M
(\(*\) Recently released mainline kernel version 4.13 integrates SSL/TLS into kernelspace- KTLS -) s
5 274 M
( for the first time.) s
5 263 M
(\(*\) KTLS is a standalone kernel module af_ktls \(https://github.com/ktls\) implemented by RedHat) s
5 252 M
( and Facebook for optimizing SSL handshake) s
5 241 M
(within kernelspace itself and reduce userspace-kernelspace switches.) s
5 230 M
(\(*\) sendfile\(\) system call in linux which is used for file transmission \(combining read+write\)) s
5 219 M
( from one fd to another uses this) s
5 208 M
(KTLS optimization in kernelspace in af_ktls codebase \(af_ktls tool\)) s
5 197 M
(\(*\) VIRGO Linux kernel fork-off requires this kernelspace TLS functionality to fully secure tr) s
5 186 M
(affic from system call client to remote) s
5 175 M
( cloud node's kernel module listeners) s
5 164 M
(\(*\) Hence VIRGO64 linux kernel mainline base is urgently upgraded from 4.10.3 to 4.13.3) s
5 153 M
(\(*\) All system calls and kernel module code in VIRGO64 now have #include\(s\) for tls.h and invo) s
5 142 M
(ke kernel_setsockopt\(\) on the client-server) s
5 131 M
(kernelspace sockets for SOL_TLS and TLS_TX options and have been rebuilt.) s
5 120 M
(\(*\) VIRGO64 RPC clone/kmemcache/cloudfs system calls to kernel module listeners have been test) s
5 109 M
(ed with this new KTLS socket option,) s
5 98 M
(on rebuilt VIRGO64 kernel overlay-ed on 4.13.3 64-bit linux kernel) s
5 87 M
(\(*\) 4.13 mainline kernel also has SMB CIFS bug fixes for recent malware attacks \(WannaCry etc.) s
5 76 M
(,\) which further ensures security of) s
5 65 M
(VIRGO64 linux fork-off kernelspace traffic.) s
5 54 M
(\(*\) New buildscript for 4.13.3 linux kernel has been committed) s
5 43 M
(\(*\) testlogs for VIRGO64 system calls and driver listeners KTLS transport have been committed ) s
5 32 M
(in virgo-docs/systemcalls_drivers/kern.log.VIRGO64_SystemCalls_Drivers.4.13.3_KTLS_kernelsocke) s
5 21 M
(ts.22September2017) s
5 10 M
(\(*\) After this upgrade, complete system calls to driver listener traffic is SSL enabled implic) s
_R
S
%%Page: (35) 35
%%BeginPageSetup
_S
18 36 translate
/pagenum 35 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (35) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(itly.) s
5 681 M
(\(*\) Updated kernel object files for 4.13.3 build are part of this commit.) s
5 659 M
(--------------------------------------------------------------------------------------------) s
5 648 M
(Commits - Remnant commits for 4.13.3 upgrade - 24 September 2017) s
5 637 M
(--------------------------------------------------------------------------------------------) s
5 626 M
(Updated init.h and syscalls.h headers for virgo system calls) s
5 604 M
(----------------------------------------------------------------------------------------------) s
5 593 M
(---------------------------------------------) s
5 582 M
(Commits - VIRGO64 4.13.3 KTLS Upgrade - System Calls-Driver Listeners End-to-End encrypted tra) s
5 571 M
(ffic testing - 25 September 2017) s
5 560 M
(----------------------------------------------------------------------------------------------) s
5 549 M
(---------------------------------------------) s
5 538 M
(\(*\) VIRGO64 CPU/KMemCache/CloudFS system calls have been invoked by userspace testcases and al) s
5 527 M
(l primitives work after 4.13.3 KTLS upgrade) s
5 516 M
(\(*\) Some small modifications to system calls code have been made and rebuilt to remove redunda) s
5 505 M
(nt iovbuf variables in printk\(s\)) s
5 494 M
(\(*\) test_virgo_filesystem.c testcase has been updated and rebuilt) s
5 483 M
(\(*\) kern.log\(s\) for CPU/KMemCache/CloudFS systemcalls to driver listeners invocations have bee) s
5 472 M
(n committed to respective system call) s
5 461 M
(directories) s
5 450 M
(\(*\) virgofstest.txt written to by virgo_write\(\) has also been committed. But a weird behaviour) s
5 439 M
( is still observed similar to previous linux kernel versions \(4.1.5 and 4.10.3\): Repetitive in) s
5 428 M
(vocations are required to flush the filesystem buffer to force write the file.) s
5 417 M
(\(*\) No DRM GEM i915 panics are observed and stability of VIRGO64 + 4.13.3 linux kernel is more) s
5 406 M
( or equal to VIRGO64 + 4.10.3 linux kernel) s
5 384 M
(----------------------------------------------------------------------------------------------) s
5 373 M
(--------------------------------------------) s
5 362 M
(Commits - VIRGO64 VIRGO_KTLS branch creation and rebase of master to previous commit - 30 Sept) s
5 351 M
(ember 2017) s
5 340 M
(----------------------------------------------------------------------------------------------) s
5 329 M
(--------------------------------------------) s
5 318 M
(\(*\) New branch VIRGO_KTLS has been created after previous commit on 25 September 2017 and all ) s
5 307 M
(5 commits after 25 September 2017 till) s
5 296 M
(28 September 2017 have been branched to VIRGO_KTLS \(which has the #ifdef for crypto_info, read) s
5 285 M
(s from /etc/virgo_ktls.conf and a new ktls) s
5 274 M
(driver module\)) s
5 263 M
(\(*\) Following are the commit hashes and commandlines in GitHub and SourceForge:) s
5 252 M
(               git branch -b VIRGO_KTLS) s
5 241 M
(               git branch master) s
5 230 M
(               git rebase -i <SHA1_on_25September2017>) s
5 219 M
(               git rebase --continue) s
5 208 M
(               git commit --amend) s
5 197 M
(               git push --force) s
5 186 M
(--------------------------------------------------------------------------------------------- ) s
5 175 M
(1958  git checkout -b) s
5 164 M
(1959  git checkout -b VIRGO_KTLS) s
5 153 M
(1960  ls) s
5 142 M
(1961  git checkout VIRGO_KTLS) s
5 131 M
(1962  git push origin VIRGO_KTLS) s
5 120 M
(1963  git status) s
5 109 M
(1964  git checkout ) s
5 98 M
(1965  git checkout -b) s
5 87 M
(1966  git branch) s
5 76 M
(1967  git branch master) s
5 65 M
(1968  git branch -h) s
5 54 M
(1969  git branch) s
5 43 M
(1970  git checkout master) s
5 32 M
(1975  git checkout -b) s
5 21 M
(1976  git checkout -b VIRGO_KTLS) s
5 10 M
(1979  git push origin VIRGO_KTLS) s
_R
S
%%Page: (36) 36
%%BeginPageSetup
_S
18 36 translate
/pagenum 36 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (36) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(1990  git rebase -i bb661e908cba2a5357414e89166f29086a28bdf0) s
5 681 M
(1991  git status) s
5 670 M
(1992  git rebase -i bb661e908cba2a5357414e89166f29086a28bdf0) s
5 659 M
(1996  git rebase --continue) s
5 648 M
(1997  git commit --amend) s
5 637 M
(2019  git rebase -i bb661e908cba2a5357414e89166f29086a28bdf0) s
5 626 M
(2029  git rebase --continue) s
5 615 M
(2037  git push --force) s
5 604 M
(2091  git rebase -i bb661e908cba2a5357414e89166f29086a28bdf0) s
5 593 M
(2092  git rebase --continue) s
5 582 M
(2093  git commit --amend) s
5 571 M
(2094  git push --force) s
5 560 M
(2110  git branch) s
5 549 M
(2111  git branch master) s
5 538 M
(2112  git checkout master) s
5 527 M
(2113  git branch) s
5 516 M
(2114  git rebase -i e76b4089633223f610fddc0e0eaff8c2cef8b9f1) s
5 505 M
(2115  git commit --amend) s
5 494 M
(2116  git rebase --continue) s
5 483 M
(2117  git push --force) s
5 472 M
(----------------------------------------------------------------------------------------------) s
5 461 M
(-------------) s
5 450 M
(KTLS in 4.13.3 has support for only private symmetric encryption. It does not support Public K) s
5 439 M
(ey Encryption yet. Since this might take a while) s
5 428 M
(mainstream VIRGO64 code might change a lot for other features. Therefore, VIRGO_KTLS specific ) s
5 417 M
(crypto_info code has been branched off and would parallelly evolve if PKI features are availab) s
5 406 M
(le on KTLS in next versions of Linux kernel.) s
5 384 M
(----------------------------------------------------------------------------------------------) s
5 373 M
(------------------------) s
5 362 M
(Commits - 1 October 2017) s
5 351 M
(----------------------------------------------------------------------------------------------) s
5 340 M
(------------------------) s
5 329 M
(kern.log\(s\) for VIRGO64 systemcalls-driver 4.13.3 64-bit upgrade tests on master branch after ) s
5 318 M
(reversal and rebase of master HEAD yesterday for) s
5 307 M
(branching to VIRGO_KTLS. There is a weird General Protection Fault in intel atomic commit work) s
5 296 M
( not seen thus far. Also -32 and -107 socket errors are frequent after reversal though code re) s
5 285 M
(mains same. But all virgo clone/kmemcache/fs systemcalls functionalities work in invocations a) s
5 274 M
(fter GPF.) s
5 252 M
(----------------------------------------------------------------------------------------------) s
5 241 M
(-----------------------------------) s
5 230 M
(Commits - VIRGO64 Utils and EventNet Drivers Update for tcp_sendmsg\(\) stack out-of-bounds erro) s
5 219 M
(r - 3 October 2017) s
5 208 M
(----------------------------------------------------------------------------------------------) s
5 197 M
(-----------------------------------) s
5 186 M
(\(*\) Utils Generic Socket Client function virgo_eventnet_log\(\) for EventNet kernel module liste) s
5 175 M
(ner was repeatedly failing in kernel_connect\(\)) s
5 164 M
(emitting -32 and -107 errors.) s
5 153 M
(\(*\) kernel_connect\(\) was guarded by set_fs\(\) and get_fs\(\) memory segment routines to prevent a) s
5 142 M
(ny memory corruption. After this stack out-of-bounds error was reported by kernel address sani) s
5 131 M
(tizer in tcp_sendmsg\(\) and copy_from_iter_full\(\) implying the message buffer was not properly ) s
5 120 M
(read within kernel.) s
5 109 M
(\(*\) After replacing strlen\(buf\) by BUF_SIZE in msg flags before kernel_connect\(\) stack out-of-) s
5 98 M
(bounds error has been remedied and Utils to EventNet virgo_eventnet_log\(\) doesn't crash in tcp) s
5 87 M
(_sendmsg\(\)) s
5 76 M
(\(*\) kern.log for this has been committed in drivers/virgo/utils/testlogs/) s
5 65 M
(\(*\) Both eventnet and utils drivers have been rebuilt) s
5 43 M
(----------------------------------------------------------------------------------------------) s
5 32 M
(---------------------------------------) s
5 21 M
(VIRGO64 system calls-drivers on linux kernel 4.13.3 - miscellaneous bugfixes - 5 October 2017) s
5 10 M
(----------------------------------------------------------------------------------------------) s
_R
S
%%Page: (37) 37
%%BeginPageSetup
_S
18 36 translate
/pagenum 37 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (37) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(---------------------------------------) s
5 681 M
(\(*\) kernel_setsockopt\(\) for KTLS has been commented in all system calls and drivers because KT) s
5 670 M
(LS functionality has been branched to) s
5 659 M
(VIRGO_KTLS) s
5 648 M
(\(*\) In virgo_clone.c, iov.iov_len has been set to BUF_SIZE) s
5 637 M
(\(*\) kernel_connect\(\) has been guarded by set_fs\(\)/get_ds\(\) in VIRGO64 system call clients) s
5 626 M
(\(*\) test_virgo_malloc.c testcase has been updated) s
5 615 M
(\(*\) There was a weird problem in in4_pton\(\): sin_addr.saddr was not set correctly from string ) s
5 604 M
(IP address and this was randomly occurring only in virgo_set\(\)) s
5 593 M
(\(*\) in4_pton\(\) is implemented in net/core/utils.c and reads the string IP address digits and s) s
5 582 M
(ums up the ASCII values to hex representation of the address. Bitwise operations within this f) s
5 571 M
(unctions were failing randomly.) s
5 560 M
(\(*\) Repeated builds were done trying different possible fixes but didn't work e.g casting sadd) s
5 549 M
(r to \(u8*\)) s
5 538 M
(\(*\) There is an alternative in_aton\(\) function which takes only String IP address and returns ) s
5 527 M
(address as __be32) s
5 516 M
(\(*\) After in_aton\(\) in virgo_set\(\) random faulty address conversion does not occur - in_aton\(\)) s
5 505 M
( is differently implemented compared to in4_pton\(\)) s
5 494 M
(\(*\) msg_hdr has been initialized to NULL in virgo_set\(\)) s
5 483 M
(\(*\) Lot of debug printk\(\)s have been added) s
5 472 M
(\(*\) kern.log \(.tar.gz\) for RPC clone/KMemCache/Filesystem systemcalls-driver has been committe) s
5 461 M
(d to virgo-docs/systemcalls_drivers) s
5 450 M
(\(*\) VIRGO Linux build steps have been updated for example commandlines to overlay mainline ker) s
5 439 M
(nel tree by VIRGO64 source) s
5 417 M
(commit 4e6681ade4ddbf1bed17f7c115b59a5ebf884256) s
5 406 M
(Author: K.Srinivasan <ka.shrinivaasan@gmail.com>) s
5 395 M
(Date:   Fri Oct 6 11:36:15 2017 +0530) s
5 373 M
(----------------------------------------------------------------------------------------------) s
5 362 M
(--------------------------------------) s
5 351 M
(VIRGO64 Queueing Kernel Module Listener - KingCobra64 - 4.13.3 - 6 October 2017) s
5 340 M
(----------------------------------------------------------------------------------------------) s
5 329 M
(--------------------------------------) s
5 318 M
(\(*\) telnet client connection to VIRGO64 Queue and a subsequent workqueue routing \(pub/sub\) to ) s
5 307 M
(KingCobra64 has been tested on 4.13.3) s
5 296 M
(\(*\) TX_TLS socket option has not been disabled and is a no-op because it has no effect on the ) s
5 285 M
(socket.) s
5 274 M
(\(*\) REQUEST_REPLY.queue for this routing from VIRGO64 queue and persisted by KingCobra64 has b) s
5 263 M
(een committed to KingCobra64 repositories in GitHub and SourceForge) s
5 241 M
(commit d4e95b58474838d65da9c69944c6287acbdfe72c) s
5 230 M
(Author: K.Srinivasan <ka.shrinivaasan@gmail.com>) s
5 219 M
(Date:   Fri Oct 6 11:05:21 2017 +0530) s
5 197 M
(----------------------------------------------------------------------------------------------) s
5 186 M
(------------------------------------) s
5 175 M
(VIRGO64 System Calls to Drivers and Telnet Client to Drivers on 4.13.3 linux kernel - master b) s
5 164 M
(ranch \(after KTLS has been reverted) s
5 153 M
(and branched to VIRGO_KTLS\) - test case logs - 6 October 2017) s
5 142 M
(----------------------------------------------------------------------------------------------) s
5 131 M
(------------------------------------) s
5 120 M
(\(*\) VIRGO64 System calls - Clone, KMemCache and Filesystem system call primitives to Driver li) s
5 109 M
(steners invocations have been been tested) s
5 98 M
(by respective test_<systemcall> unit testcases) s
5 87 M
(\(*\) VIRGO64 Telnet Clients to Driver listeners invocations have been tested by telnet connecti) s
5 76 M
(ons) s
5 65 M
(\(*\) Master branches in SourceForge and GitHub VIRGO64 do not have KTLS provisions. Only VIRGO_) s
5 54 M
(KTLS branch has crypto_info and setsockopt\(\)) s
5 43 M
( for TX_TLS for kernel sockets.) s
5 32 M
(\(*\) It has been already mentioned in NeuronRain Documentation in https://neuronrain-documentat) s
5 21 M
(ion.readthedocs.io/en/latest/ on securing) s
5 10 M
(VIRGO cloud nodes in the absence of KTLS - most obvious solution is to install VPN client-serv) s
_R
S
%%Page: (38) 38
%%BeginPageSetup
_S
18 36 translate
/pagenum 38 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (38) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(ers in all nodes which create Virtual IPs) s
5 681 M
( on a secure tunnel \(e.g OpenVPN\).) s
5 670 M
(\(*\) VIRGO64 system call clients and driver listeners should read these Virtual IPs from /etc/v) s
5 659 M
(irgo_client.conf and /etc/virgo_cloud.conf) s
5 648 M
(  and cloud traffic is confined to the VPN tunnel.) s
5 626 M
(----------------------------------------------------------------------------------------------) s
5 615 M
(---------------------------------------) s
5 604 M
(VIRGO64 SystemCalls-Drivers endtoend invocations unit case tests - on 4.13.3 - VIRGO64 main br) s
5 593 M
(anch - 11 October 2017) s
5 582 M
(----------------------------------------------------------------------------------------------) s
5 571 M
(---------------------------------------) s
5 560 M
(\(*\) VIRGO64 systemcalls have been invoked from unit test cases \(test_<system_call>\) in a loop ) s
5 549 M
(of few hundred iterations) s
5 538 M
(\(*\) No DRM GEM i915 panics or random crashes are observed and stability is good) s
5 527 M
(\(*\) This is probably the first loop iterative testing of VIRGO system calls and drivers.) s
5 516 M
(\(*\) Kernel logs for this have been committed to virgo-docs/systemcalls_drivers directory.) s
5 505 M
(\(*\) Note on concurrency: Presently mutexing within system calls have been commented because in) s
5 494 M
( past linux versions mutexing within kernel was causing strange panic issues. As a design choi) s
5 483 M
(ce and feature-stability tradeoff \(stability is more important than introducing additional cod) s
5 472 M
(e\) mutexing has been lifted up to userspace. It is upto the user applications invoking the sys) s
5 461 M
(tem calls to synchronize multiple user threads invoking VIRGO64 system calls i.e VIRGO64 syste) s
5 450 M
(m calls are not re-entrant. This would allow just one kernel thread \(mapped 1:1 to a user thre) s
5 439 M
(ad\)) s
5 428 M
( to execute in kernel space. Mostly this is relevant only to kmemcache system calls which have) s
5 417 M
( global in-kernel-memory address translation tables and next_id variable. VIRGO clone/filesyst) s
5 406 M
(em calls do not have global in-kernel-memory datastructures.) s
5 384 M
(----------------------------------------------------------------------------------------------) s
5 373 M
(-------------------------------------------) s
5 362 M
(VIRGO64 SystemCalls-Drivers concurrent invocations - 2 processes having shared mutex - 14 Octo) s
5 351 M
(ber 2017) s
5 340 M
(----------------------------------------------------------------------------------------------) s
5 329 M
(-------------------------------------------) s
5 318 M
(\(*\) VIRGO64 systemcalls are invoked in a function which is called from 2 processes concurrentl) s
5 307 M
(y) s
5 296 M
(\(*\) Mutexes between the processes are PTHREAD_PROCESS_SHARED attribute set.) s
5 285 M
(\(*\) test_virgo_malloc.c unit testcase has been enhanced to fork\(\) a process and invoke systemc) s
5 274 M
(alls in a function for 100 iterations each) s
5 263 M
(\(*\) Logs for the Virgo Unique IDs malloc/set/get/free in the systemcalls side and kern.logs fo) s
5 252 M
(r the drivers have been committed to test/testlogs/) s
5 241 M
(\(*\) No DRM GEM i915 crashes were observed) s
5 230 M
(\(*\) test_virgo_malloc.c testcase demonstrates the coarse grained critical section lock/unlock ) s
5 219 M
(for kmemcache systemcalls and is a template) s
5 208 M
(that should be followed for any userspace application.) s
5 186 M
(----------------------------------------------------------------------------------------------) s
5 175 M
(--------------------------------------------) s
5 164 M
(VIRGO64 Kernel Analytics - Streaming Implementation - 13 December 2017) s
5 153 M
(----------------------------------------------------------------------------------------------) s
5 142 M
(--------------------------------------------) s
5 131 M
(\(#\) Presently kernel analytics config have to be read from a file storage. This is a huge perf) s
5 120 M
(ormance bottleneck when frequency of) s
5 109 M
(analytics variables written to is realtime. For example autonomous vehicles/drones write gigab) s
5 98 M
(ytes of navigation data in few minutes.) s
5 87 M
(\(#\) Because of this /etc/virgo_kernel_analytics.conf grows tremendously. File I/O in linux ker) s
5 76 M
(nel module is also fragile and not recommended.) s
5 65 M
(\(#\) Previous latency limitations necessitate an alternative high performance analytics config ) s
5 54 M
(variable read algorithm) s
5 43 M
(\(#\) This commit introduces new streaming kernel analytics config reading function - It connect) s
5 32 M
(s to a kernel analytics streaming IP address) s
5 21 M
(on hardcoded port 64000 and reads analytics key-value pairs in an infinite loop.) s
5 10 M
(\(#\) These read key-value pairs are stored in a kernel global ring buffer exported symbol \(by m) s
_R
S
%%Page: (39) 39
%%BeginPageSetup
_S
18 36 translate
/pagenum 39 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (39) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(odulus operator\). Because of circular buffer, older kernel analytics variables are overwritten) s
5 681 M
( repetitively.) s
5 670 M
(\(#\) kernel socket message flags are set to MSG_MORE | MSG_FASTOPEN | MSG_NOSIGNAL for high res) s
5 659 M
(ponse time. MSG_FASTOPEN works with no panic) s
5 648 M
(in 4.13.3 64-bit which was a problem in previous kernel versions.) s
5 637 M
(\(#\) kern.log for this has been committed to kernel_analytics/testlogs/) s
5 626 M
(\(#\) include/linux/virgo_kernel_analytics.h header file has been updated for declarations relat) s
5 615 M
(ed to streaming analytics.) s
5 604 M
(\(#\) Webserver used for this is netcat started on port 64000 as:) s
5 593 M
(               nc -l 64000) s
5 582 M
(               >k1=v1) s
5 571 M
(               >k2=v2) s
5 560 M
(               ...) s
5 538 M
(----------------------------------------------------------------------------------------------) s
5 527 M
(------------------) s
5 516 M
(VIRGO64 Kernel Analytics - Reading Stream of Analytic Variables made a kernel thread - 13 Dece) s
5 505 M
(mber 2017) s
5 494 M
(----------------------------------------------------------------------------------------------) s
5 483 M
(------------------) s
5 472 M
(\(#\) This is sequel to previous commit for Stream reading Kernel Analytics variables over a net) s
5 461 M
(work socket) s
5 450 M
(\(#\) read_streaming_virgo_kernel_analytics_conf\(\) function is invoked in a separate kernel thre) s
5 439 M
(ad because module init is blocked) s
5 428 M
(\(#\) VIRGO64 config module was loaded and exported kernel analytics variables read over socket ) s
5 417 M
(by previous spin-off kernel thread are) s
5 406 M
(imported in VIRGO64 config init.) s
5 395 M
(\(#\) kern.log for this has been committed to testlogs/) s
5 384 M
(\(#\) Pre-requisite: Webservice serving kernel_analytics variables must be started before kernel) s
5 373 M
(_analytics module is loaded in kernel.) s
5 362 M
(\(#\) By this a minimum facility for live reading analytics anywhere on cloud \(it can be userspa) s
5 351 M
(ce or kernelspace\) and exporting them) s
5 340 M
(to modules on a local cloud node kernel has been achieved - ideal for cloud-analytics-driven I) s
5 329 M
(oT) s
5 307 M
(----------------------------------------------------------------------------------------------) s
5 296 M
(--------------------------------------) s
5 285 M
(VIRGO64 System Calls - Drivers - Kernel Analytics Streaming - on 4.13.3 kernel - 15 December 2) s
5 274 M
(017) s
5 263 M
(----------------------------------------------------------------------------------------------) s
5 252 M
(--------------------------------------) s
5 241 M
(\(#\) VIRGO64 System Calls to Drivers invocations on 4.13.3 kernel have been executed after enab) s
5 230 M
(ling streaming kernel analytics) s
5 219 M
(\(#\) VIRGO64 RPC/KMemCache/CloudFS Drivers import, streamed variable-value pairs exported from ) s
5 208 M
(kernel_analytics read from netcat webservice) s
5 197 M
(\(#\) VIRGO64 KMemCache testcase has 2 concurrent processes invoking kememcache systemcalls in a) s
5 186 M
( loop.) s
5 175 M
(\(#\) kern.log for this has been committed to virgo-docs/systemcalls_drivers) s
5 164 M
(\(#\) virgofstest.txt written by CloudFS systemcalls-drivers invocation is also committed to vir) s
5 153 M
(go-docs/systemcalls_drivers) s
5 131 M
(----------------------------------------------------------------------------------------------) s
5 120 M
(---------------------------------------) s
5 109 M
(VIRGO64 system calls and drivers - Quadcore 64bit - Known Issues - documentation only - 26 May) s
5 98 M
( 2019) s
5 87 M
(----------------------------------------------------------------------------------------------) s
5 76 M
(---------------------------------------) s
5 65 M
(1. VIRGO64 system calls to drivers interactions so far have been tested only on dual core 64 b) s
5 54 M
(it architecture.) s
5 43 M
(2. In quad core 64 bit there have been random -32,-107, -101 errors in kernel_connect\(\) from s) s
5 32 M
(ystem call clients to driver services in) s
5 21 M
(almost all three types of VIRGO64 system calls - clone/kmemcache/filesystem - to respective dr) s
5 10 M
(ivers) s
_R
S
%%Page: (40) 40
%%BeginPageSetup
_S
18 36 translate
/pagenum 40 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (40) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(3. These errors do not occur if following in4_pton\(\) invocation is changed to in_aton\(\) before) s
5 681 M
( kernel_connect\(\) in system call clients and kernel is rebuilt with following change before ke) s
5 670 M
(rnel_connect\(\):) s
5 648 M
(         /*in4_pton\(vaddr->hstprt->hostip, strlen\(vaddr->hstprt->hostip\), \(u8*\)&sin.sin_addr.s) s
5 637 M
(_addr, '\\0',NULL\);*/) s
5 626 M
(        sin.sin_addr.s_addr=in_aton\(vaddr->hstprt->hostip\);) s
5 604 M
(4. Since this problem occurs erratically and only on quadcore 64-bit and reasons for these ran) s
5 593 M
(dom -32,-101,-107 errors are still unknown, no commit for this code change has been made and t) s
5 582 M
(his issue is left as documented known issue. ) s
5 571 M
(5. Most likely the u8* cast causes client socket address corruption.) s
5 560 M
(6. Because of random -32,-101,-107 errors, in quadcore, system calls sometimes do not transmit) s
5 549 M
( client side commandline primitive strings to driver services.) s
5 527 M
(----------------------------------------------------------------------------------------------) s
5 516 M
(----------------------------------------) s
5 505 M
(Linux Kernel 5.1.4, PXRC Drone/UAV/Flight Controller, UVC Video WebCam driver, Kernel Analytic) s
5 494 M
(s, NeuronRain Usecases - 28 May 2019) s
5 483 M
(----------------------------------------------------------------------------------------------) s
5 472 M
(----------------------------------------) s
5 461 M
(1. Two analytics usecases mentioned in NeuronRainUsecases.txt in NeuronRain AsFer asfer-docs/ ) s
5 450 M
(have been illustrated in this commit by) s
5 439 M
(2 example drivers for PXRC Drone controller Driver and UVC Video WebCam Driver.) s
5 428 M
(2. PXRC Phoenix RC flight controller is part of linux kernel from 4.17 and kernel major versio) s
5 417 M
(n has been bumped to 5.x.x recently.) s
5 406 M
(3. Linux kernel 5.1.4 has been built by a new build script - buildscript_5.1.4.sh.) s
5 395 M
(4. Linux kernel 5.1.4 has recent versions of PXRC drone controller driver and a UVC video webc) s
5 384 M
(am) s
5 373 M
(driver \(http://www.ideasonboard.org/uvc/faq/\)) s
5 362 M
(5. New directory linux-kernel-5.1.4-extensions/ has been created for VIRGO64 code built on ker) s
5 351 M
(nel mainline version 5.1.4. No branch is created) s
5 340 M
(for version 5.1.4 because pxrc driver is part of kernel only from 4.17 while code in linux-ker) s
5 329 M
(nel-extensions/ is based on kernel 4.13.3 for) s
5 318 M
(dual core 64-bit architecture.) s
5 307 M
(6. New VIRGO64 build on 5.1.4 kernel is necessary only for PXRC, UVC and kernel_analytics driv) s
5 296 M
(ers while other VIRGO64 drivers have not been) s
5 285 M
(ported to 5.1.4 and are still on 4.13.3 kernel.) s
5 274 M
(7. Two drivers for PXRC and UVC Webcam in 5.1.4 have been committed under linux-kernel-5.1.4-e) s
5 263 M
(xtensions/drivers/media/usb/uvc and linux-kernel-5.1.4-extensions/drivers/input/joystick) s
5 252 M
(8. VIRGO64 kernel_analytics driver for 5.1.4 has been committed under linux-kernel-5.1.4-exten) s
5 241 M
(sions/drivers/virgo/kernel_analytics.) s
5 230 M
(9. Porting VIRGO64 kernel_analytics driver from 4.13.3 to 5.1.4 required changing vfs_read\(\) o) s
5 219 M
(f /etc/virgo_kernel_analytics.conf to) s
5 208 M
(kernel_read\(\) in config file read.) s
5 197 M
(10. Drivers code for PXRC is in drivers/input/joystick/pxrc.c has been instrumented with few p) s
5 186 M
(rintk\(\) statements that print the) s
5 175 M
(virgo_kernel_analytics_conf array variable-value pairs exported by VIRGO64 kernel_analytics dr) s
5 164 M
(iver. Kernel analytics variables are) s
5 153 M
(imported by #include of virgo_config.h) s
5 142 M
(11. Drivers code for UVC Video WebCam is in drivers/media/usb/uvc. File drivers/media/usb/uvc/) s
5 131 M
(uvc_video.c has been instrumented with lot of) s
5 120 M
(uvc_trace\(\) statements which print kernel_analytics driver exported analytics variable "match") s
5 109 M
( and its boolean value. Kernel analytics variables are imported  by #include of virgo_config.h) s
5 98 M
(. Variable "match" has been set to "True" assuming a face recognition or retinal scan match by) s
5 87 M
( userspace analytics and /etc/virgo_kernel_analytics.conf has been written to.) s
5 76 M
(12. UVC Video WebCam traces are enabled by:) s
5 65 M
(         echo 0xffff > /sys/module/uvcvideo/parameters/trace) s
5 54 M
(13. Example kern.log\(s\) for PXRC and UVC drivers are committed under drivers/input/joystick/te) s
5 43 M
(stlogs/kern.log.pxrc.28May2019 and drivers/media/usb/uvc/kern.log.uvcvideo.28May2019 which sho) s
5 32 M
(w UVC traces printing the imported kernel analytics variable "match=True" and PXRC driver regi) s
5 21 M
(stration. No other PXRC traces are printed because of lack of drones and drone licensing depen) s
5 10 M
(dency) s
_R
S
%%Page: (41) 41
%%BeginPageSetup
_S
18 36 translate
/pagenum 41 def
/fname (VirgoDesign64.txt) def
/fdir (.) def
/ftail (VirgoDesign64.txt) def
% User defined strings:
/fmodstr (Tue Feb 18 12:08:29 2020) def
/pagenumstr (41) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
do_header
5 692 M
(14. Both UVC and PXRC drivers, VIRGO64 kernel_analytics driver and linux kernel 5.1.4 have bee) s
5 681 M
(n built on quadcore 64-bit architecture.) s
5 670 M
(15. This example import of VIRGO64 kernel analytics variables into PXRC drone and UVC webcam d) s
5 659 M
(rivers demonstrate passing of userspace analytics information to kernel for suitable action.) s
5 648 M
(16. Driver build shell scripts have been committed to UVC and PXRC driver directories.) s
5 626 M
(----------------------------------------------------------------------------------------------) s
5 615 M
(-----------------------------------------------) s
5 604 M
(Concurrent Managed Workqueue\(CMWQ\), VIRGO64 Queueing and KingCobra64 messaging - 12 June 2019) s
5 593 M
(----------------------------------------------------------------------------------------------) s
5 582 M
(-----------------------------------------------) s
5 571 M
(1. Existing workqueue underneath VIRGO64 queueing and requests routed by it to KingCobra64 mes) s
5 560 M
(saging are old legacy workqueues which) s
5 549 M
(have been revamped to Concurrent Managed Workqueue which supports concurrent messaging and lot) s
5 538 M
( of other options in queue creation.) s
5 527 M
(2. create_workqueue\(\) in VIRGO64 Queueing has been changed to alloc_workqueue\(\) of Concurrent ) s
5 516 M
(Managed Workqueue.) s
5 505 M
(3. VIRGO64 Queueing request routing to KingCobra64 messaging has been tested with CMWQ and que) s
5 494 M
(ueing log and kingcobra64 Request-Reply) s
5 483 M
(Queue have been committed to respective testlogs of the drivers) s
5 472 M
(4. reading from stream has been disabled in virgo_kernel_analytics.h) s
5 461 M
(5. Reference - CMWQ documentation - https://www.kernel.org/doc/html/v4.11/core-api/workqueue.h) s
5 450 M
(tml) s
5 439 M
(6. Byzantine Fault Tolerance in KingCobra64 persisted queue can be made available by performan) s
5 428 M
(t CMWQ and routing to the Replicas of) s
5 417 M
(REQUEST_REPLY.queue by any of the practical BFT protocols available.) s
5 406 M
(7. Most important application of CMWQ based VIRGO64-KingCobra64 is in the context of kernelspa) s
5 395 M
(ce hardware messaging in IoT,Drones and other) s
5 384 M
(analytics driven embedded systems.) s
5 373 M
(8. An example usecase which is a mix of sync and async I/O in kernelspace:) s
5 362 M
(        \(*\) Analytics Variables computed by userspace machine learning are read over socket st) s
5 351 M
(ream by kernel_analytics driver and) s
5 340 M
(exported kernelwide) s
5 329 M
(        \(*\) Some interested Drone driver in kernel \(example PXRC\) reads the analytics variable) s
5 318 M
(s synchronously and sends reply messages asynchronously to VIRGO64 Queuing driver over kernel ) s
5 307 M
(sockets.) s
5 296 M
(        \(*\) VIRGO Queuing routes the queued messages to KingCobra64 driver) s
5 263 M
(Srinivasan Kannan \(alias\) Ka.Shrinivaasan \(alias\) Shrinivas Kannan) s
5 252 M
(http://sites.google.com/site/kuja27) s
_R
S
%%Trailer
%%Pages: 41
%%DocumentNeededResources: font Courier-Bold Courier 
%%EOF
